import{M as u}from"./motion-cff095c2.js";import{d as h,k as w,Y as N,r as i,o as z,i as B,j as l,e,f as a,g as E,h as p,z as T,ay as x,aw as $}from"./index-6f723797.js";import{u as V,a as F}from"./verifyCode-7c47b874.js";import{u as f}from"./hooks-ea9aeb9a.js";import{d as g}from"./lock-fill-34b71c6c.js";import{d as S}from"./iphone-bcaa848c.js";import{d as j}from"./user-3-fill-70ba8c19.js";const D={class:"flex justify-between w-full"},K=h({__name:"register",props:{currentPage:{type:Number,default:3}},setup(M){const c=w(!1),n=w(!1),t=N({username:"",phone:"",verifyCode:"",password:"",repeatPassword:""}),y=w(),{isDisabled:b,text:v}=V(),k=[{validator:(m,o,s)=>{o===""?s(new Error("请输入确认密码")):t.password!==o?s(new Error("两次密码不一致")):s()},trigger:"blur"}],C=async m=>{n.value=!0,m&&await m.validate((o,s)=>{if(o)c.value?setTimeout(()=>{x("注册成功",{type:"success"}),n.value=!1},2e3):(n.value=!1,x("请勾选隐私政策",{type:"warning"}));else return n.value=!1,s})};function U(){V().end(),$().SET_CURRENTPAGE(0)}return(m,o)=>{const s=i("el-input"),d=i("el-form-item"),_=i("el-button"),P=i("el-checkbox"),R=i("el-form");return z(),B(R,{ref_key:"ruleFormRef",ref:y,model:t,rules:a(F),size:"large"},{default:l(()=>[e(a(u),null,{default:l(()=>[e(d,{rules:[{required:!0,message:"请输入账号",trigger:"blur"}],prop:"username"},{default:l(()=>[e(s,{clearable:"",modelValue:t.username,"onUpdate:modelValue":o[0]||(o[0]=r=>t.username=r),placeholder:"账号","prefix-icon":a(f)(a(j))},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),e(a(u),{delay:100},{default:l(()=>[e(d,{prop:"phone"},{default:l(()=>[e(s,{clearable:"",modelValue:t.phone,"onUpdate:modelValue":o[1]||(o[1]=r=>t.phone=r),placeholder:"邮箱账号","prefix-icon":a(f)(a(S))},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),e(a(u),{delay:150},{default:l(()=>[e(d,{prop:"verifyCode"},{default:l(()=>[E("div",D,[e(s,{clearable:"",modelValue:t.verifyCode,"onUpdate:modelValue":o[2]||(o[2]=r=>t.verifyCode=r),placeholder:"验证码","prefix-icon":a(f)("ri:shield-keyhole-line")},null,8,["modelValue","prefix-icon"]),e(_,{disabled:a(b),class:"ml-2",onClick:o[3]||(o[3]=r=>a(V)().start(y.value,"phone"))},{default:l(()=>[p(T(a(v).length>0?a(v)+"秒后重新获取":"获取验证码"),1)]),_:1},8,["disabled"])])]),_:1})]),_:1}),e(a(u),{delay:200},{default:l(()=>[e(d,{prop:"password"},{default:l(()=>[e(s,{clearable:"","show-password":"",modelValue:t.password,"onUpdate:modelValue":o[4]||(o[4]=r=>t.password=r),placeholder:"密码","prefix-icon":a(f)(a(g))},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),e(a(u),{delay:250},{default:l(()=>[e(d,{rules:k,prop:"repeatPassword"},{default:l(()=>[e(s,{clearable:"","show-password":"",modelValue:t.repeatPassword,"onUpdate:modelValue":o[5]||(o[5]=r=>t.repeatPassword=r),placeholder:"确认密码","prefix-icon":a(f)(a(g))},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),e(a(u),{delay:300},{default:l(()=>[e(d,null,{default:l(()=>[e(P,{modelValue:c.value,"onUpdate:modelValue":o[6]||(o[6]=r=>c.value=r)},{default:l(()=>[p(" 我已仔细阅读并接受 ")]),_:1},8,["modelValue"]),e(_,{link:"",type:"primary"},{default:l(()=>[p(" 隐私政策 ")]),_:1})]),_:1})]),_:1}),e(a(u),{delay:350},{default:l(()=>[e(d,null,{default:l(()=>[e(_,{class:"w-full",size:"default",type:"primary",loading:n.value,onClick:o[7]||(o[7]=r=>C(y.value))},{default:l(()=>[p(" 确定 ")]),_:1},8,["loading"])]),_:1})]),_:1}),e(a(u),{delay:400},{default:l(()=>[e(d,null,{default:l(()=>[e(_,{class:"w-full",size:"default",onClick:U},{default:l(()=>[p(" 返回 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])}}});export{K as _};
