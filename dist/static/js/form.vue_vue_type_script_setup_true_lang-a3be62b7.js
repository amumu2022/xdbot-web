import{c as k}from"./upload-8e5aad99.js";import{d as F,k as l,r as p,o as u,i as b,j as s,g as B,h as n,c as C,F as E,v as N,e as d,z,ay as e}from"./index-6f723797.js";const D={class:"el-upload__tip"},$=F({__name:"form",setup(R,{expose:_}){const f=l();function y(){return f.value}const i=l(5);l([]);const x=()=>{e(`选择的文件不能超过 ${i.value} `,{type:"warning"})},m=["wav","mp3","mp4","aac"],v=(t,r)=>{e(`已移除文件 ${t.name} `,{type:"warning"})},w=async t=>{const r=t.name.split(".").pop().toLowerCase(),c=10*1024*1024;if(!m.includes(r)){e("操作失败，音频格式错误",{type:"error"});return}if(t.size>c){e("操作失败，音频尺寸超过限制",{type:"error"});return}const a=new FormData;a.append("file",t.raw);try{const o=await k(a);o.code===200?e("文件上传成功",{type:"success"}):e(o.message,{type:"error"})}catch(o){e(o,{type:"error"})}};return _({getRef:y}),(t,r)=>{const c=p("el-button"),a=p("el-text"),o=p("el-upload");return u(),b(o,{class:"upload-demo","on-preview":w,"on-remove":v,"on-exceed":x,limit:i.value,"auto-upload":!1,drag:"","list-type":"text",multiple:""},{tip:s(()=>[B("div",D,[n(" 仅支持大小不超过10Mb的 "),(u(),C(E,null,N(m,(g,h)=>d(a,{key:h,class:"mx-1",type:"warning"},{default:s(()=>[n(z(`${g}`)+"    ",1)]),_:2},1024)),64)),n(" 格式的音频 ")])]),default:s(()=>[d(c,{type:"primary"},{default:s(()=>[n("拖拽文件或点击上传")]),_:1})]),_:1},8,["limit"])}}});export{$ as _};
