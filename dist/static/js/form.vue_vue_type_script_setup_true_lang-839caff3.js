import{h as k}from"./upload-8e5aad99.js";import{d as B,k as c,r as l,o as m,i as C,j as s,g as E,h as n,c as F,F as N,v as j,e as d,z,ay as e}from"./index-6f723797.js";const D={class:"el-upload__tip"},$=B({__name:"form",setup(R,{expose:_}){const f=c(),y=c(!1);function g(){return f.value}const p=c(5),i=["png","jpg","jpeg","ico","gif","bmp"],v=()=>{e(`选择的文件不能超过 ${p.value} `,{type:"warning"})},x=t=>{e(`已移除文件 ${t.name} `,{type:"warning"})},w=async t=>{const u=t.name.split(".").pop().toLowerCase(),r=5*1024*1024;if(!i.includes(u)){e("操作失败，图片格式错误",{type:"error"});return}if(t.size>r){e("操作失败，图片尺寸超过限制",{type:"error"});return}const a=new FormData;a.append("file",t.raw);try{const o=await k(a);o.code===200?(e("文件上传成功",{type:"success"}),y.value=!0):e(o.message,{type:"error"})}catch(o){e(o,{type:"error"})}};return _({getRef:g}),(t,u)=>{const r=l("el-button"),a=l("el-text"),o=l("el-upload");return m(),C(o,{class:"upload-demo","on-preview":w,"on-remove":x,"on-exceed":v,limit:p.value,"auto-upload":!1,drag:"","list-type":"picture",multiple:""},{tip:s(()=>[E("div",D,[n(" 仅支持大小不超过5Mb的 "),(m(),F(N,null,j(i,(h,b)=>d(a,{key:b,class:"mx-1",type:"warning"},{default:s(()=>[n(z(`${h}`)+"    ",1)]),_:2},1024)),64)),n(" 格式的图片 ")])]),default:s(()=>[d(r,{type:"primary"},{default:s(()=>[n("拖拽文件或点击上传")]),_:1})]),_:1},8,["limit"])}}});export{$ as _};
