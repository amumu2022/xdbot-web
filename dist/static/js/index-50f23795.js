import{d as q,bi as A,t as H,r as i,o as a,i as k,j as r,e as o,g as n,x as b,f as l,c,F as g,v as x,z as _,B as S,b8 as C,bn as P,bo as Q,J as Y,aG as Z,U as ee,bp as te,h as le,W as p,ay as y,aI as oe,aJ as ae}from"./index-6f723797.js";import{_ as ne}from"./form.vue_vue_type_script_setup_true_lang-a9032dbb.js";import{c as se}from"./chatgpt-icon-09e07282.js";import{u as ce}from"./useBasicLayout-67c5ef4f.js";import{w as D,r as m,S as e,g as ie,s as re,i as f,a as V}from"./hooks-4901e11f.js";import{E as ue}from"./md-editor-v3.es-57b70782.js";/* empty css              */import"./xdteam-1bd5232c.js";import"./monitor-98a23e5d.js";const de=n("span",null,"XD 事件模拟",-1),_e={key:0,style:{color:"green","margin-right":"10px"}},pe={key:1,style:{color:"red","margin-right":"10px"}},me={class:"chat-content"},ve={key:0,class:"word"},be=["src"],ge={class:"info"},ye={class:"time"},fe={key:0,class:"text-message"},he={key:2,controls:"",width:"300",class:"video-message"},we=["src"],ke={key:3,class:"audio-container"},xe={controls:"",class:"aud",style:{outline:"none"}},Se=["src"],Ce={key:4,class:"audio-container"},De={key:1,class:"word-my"},Ve={class:"info"},Ie={class:"time"},Me=["src"],ze=q({name:"FeaturesIM",__name:"index",setup(Ne){const{clipboardValue:I,copied:M}=A(),{isMobile:N}=ce();function B(){p().setItem("SimulateSet",{ws_url:e.value.ws_url,nickname:e.value.nickname,message_type:e.value.message_type,sex:e.value.sex,age:e.value.age,user_id:e.value.user_id,group_id:e.value.group_id,card:e.value.card,level:e.value.level,role:e.value.role,bubble1:e.value.bubble1,bubble2:e.value.bubble2})}function L(){var d;(d=p().getItem("SimulateSet"))!=null&&d.ws_url&&(e.value=p().getItem("SimulateSet")),p().getItem("wsChatData")?m.value=p().getItem("wsChatData"):m.value=[{mineMsg:!1,nickName:"小管家",headUrl:"",time:new Date().toLocaleString(),messages:[{type:"text",content:`你好，我是小艾格，现在时间是${new Date().toLocaleString()}`}]}]}function U(){m.value=[{mineMsg:!1,nickName:"小管家",headUrl:"",time:new Date().toLocaleString(),messages:[{type:"text",content:`你好，我是小艾格，现在时间是${new Date().toLocaleString()}`}]}],p().setItem("wsChatData",m.value),y("聊天记录已清空",{type:"warning"})}const F=()=>{I.value=JSON.stringify(m.value),M.value&&y("聊天记录已复制",{type:"success"})};function E(){oe({width:"46%",draggable:!0,fullscreenIcon:!0,fullscreen:!!N.value,title:"参数调整",contentRenderer:()=>ne,props:{formInline:{ws_url:e.value.ws_url,nickname:e.value.nickname,message_type:e.value.message_type,sex:e.value.sex,age:e.value.age,user_id:e.value.user_id,group_id:e.value.group_id,card:e.value.card,level:e.value.level,role:e.value.role,bubble1:e.value.bubble1,bubble2:e.value.bubble2}},footerButtons:[{label:"确认",type:"success",btnClick:({dialog:{options:d,index:t}})=>{ae(d,t)}}],closeCallBack:({options:d})=>{const{formInline:t}=d.props;e.value.ws_url=t.ws_url,e.value.nickname=t.nickname,e.value.sex=t.sex,e.value.age=t.age,e.value.user_id=t.user_id,e.value.group_id=t.group_id,e.value.message_type=t.message_type,e.value.card=t.card,e.value.level=t.level,e.value.role=t.role,e.value.bubble1=t.bubble1,e.value.bubble2=t.bubble2,y("保存成功",{type:"success"}),B()}})}return H(()=>{L()}),(d,t)=>{const J=i("el-header"),K=i("el-image"),R=i("el-main"),v=i("el-button"),$=i("el-popconfirm"),h=i("el-row"),z=i("el-col"),O=i("el-input"),T=i("el-footer"),w=i("el-container"),W=i("el-card");return a(),k(W,null,{default:r(()=>[o(w,null,{default:r(()=>[o(w,{style:{height:"85vh",display:"flex","flex-direction":"column"}},{default:r(()=>[o(J,null,{default:r(()=>[de,n("span",{style:b({color:l(D)?"green":"red",marginLeft:"30px"})}," WS 连接状态 ",4),l(D)?(a(),c("span",_e,"❤")):(a(),c("span",pe,"◑"))]),_:1}),o(R,null,{default:r(()=>[n("div",me,[(a(!0),c(g,null,x(l(m),(u,j)=>(a(),c("div",{key:j},[u.mineMsg?(a(),c("div",De,[n("div",Ve,[n("p",Ie,_(u.nickName)+" "+_(u.time),1),n("div",{class:"info-content bubble",style:b({background:l(e).bubble1})},_(u.content),5)]),n("img",{class:"avatar",src:u.headUrl},null,8,Me)])):(a(),c("div",ve,[n("img",{class:"avatar",src:l(se)},null,8,be),n("div",ge,[n("p",ye,_(u.nickName)+" "+_(u.time),1),n("div",{class:"info-content bubble",style:b({background:l(e).bubble2})},[(a(!0),c(g,null,x(u.messages,(s,G)=>(a(),c(g,{key:G},[s.type==="text"?(a(),c("div",fe,_(s.content),1)):S("",!0),s.type==="image"?(a(),k(K,{key:1,class:"chat-image",src:l(ie)(s.content),"preview-src-list":l(re)(s.content)},null,8,["src","preview-src-list"])):s.type==="video"?(a(),c("video",he,[n("source",{src:s.content,type:"video/mp4"},null,8,we)])):s.type==="audio"?(a(),c("div",ke,[n("audio",xe,[n("source",{src:s.content,type:"audio/mpeg"},null,8,Se)])])):s.type==="chatgpt"||s.type==="markdown"?(a(),c("div",Ce,[o(l(ue),{modelValue:s.content,"onUpdate:modelValue":X=>s.content=X,"preview-only":"",showCodeRowNumber:""},null,8,["modelValue","onUpdate:modelValue"])])):S("",!0)],64))),128))],4)])]))]))),128))])]),_:1}),o(T,{height:"150px"},{default:r(()=>[o(h,{class:"low-row",style:{width:"100%"}},{default:r(()=>[o(z,{span:24},{default:r(()=>[o(h,null,{default:r(()=>[o(v,{type:"success",icon:l(C),circle:""},null,8,["icon"]),o(v,{type:"info",icon:l(C),circle:"",onClick:E},null,8,["icon"]),o(v,{type:"primary",icon:l(P),circle:"",onClick:F},null,8,["icon"]),o($,{title:"是否删除对话?",onConfirm:U,"confirm-button-type":"danger","cancel-button-type":"warning"},{reference:r(()=>[o(v,{type:"danger",icon:l(Q),circle:""},null,8,["icon"])]),_:1})]),_:1})]),_:1}),o(O,{modelValue:l(f),"onUpdate:modelValue":t[0]||(t[0]=u=>Y(f)?f.value=u:null),class:"chat-input",rows:4,type:"textarea",placeholder:"请输入内容...",onKeydown:Z(ee(l(V),["ctrl"]),["enter"])},null,8,["modelValue","onKeydown"])]),_:1})]),_:1})]),_:1})]),_:1}),o(v,{type:"success",icon:l(te),onClick:l(V),class:"send-button-fixed"},{default:r(()=>[le("发送")]),_:1},8,["icon","onClick"])]),_:1})}}});export{ze as default};
