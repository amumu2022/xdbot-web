import{l as C,w as F,c as N}from"./hooks-4901e11f.js";import{d as T,u as z,k as M,t as S,r as f,o as m,i as W,j as c,g as $,e as h,h as E,c as x,F as V,v as q,f as I,O as L,z as O,W as R,aN as j,bh as g}from"./index-6f723797.js";import"./xdteam-1bd5232c.js";import"./monitor-98a23e5d.js";const A={style:{display:"flex","align-items":"center"}},G=$("div",{style:{"margin-right":"30px"}},"消息日志",-1),H={class:"parent-container"},J={class:"log-container"},Y=T({name:"FeaturesAi",__name:"index",setup(K){const k=z(),b=M(null);function _(){k.push({name:"FeaturesIM"})}function v(){var n;const s=(n=R().getItem("SimulateSet"))==null?void 0:n.ws_url;s?F.value||N(s):j.confirm("ws地址尚未配置，是否跳转配置","Warning",{confirmButtonText:"前往",cancelButtonText:"取消",type:"warning"}).then(()=>{_(),g({type:"info",message:"请点击设置按钮进行设置"})}).catch(()=>{g({type:"warning",message:"配置ws后才能输出日志哦~"})})}function y(s){var l,i,u,t,p;let n=`${s.time} [${s.level}] ${s.bot} -> `;const r=s.type,e=(l=s.data)==null?void 0:l.group_id,o=(i=s.data)==null?void 0:i.user_id;return s.name=="send_msg"?(n+=`发送${r==="group"?"群聊":"私聊"} `,n+=`(${r==="group"?e:o}) `,n+=`的消息：${s.message}`):s.name=="message"?(n+=`收到${r==="group"?"群聊":"私聊"}`,n+=`  (${r==="group"?e:o}) `,n+=`内 ${(u=s.data)==null?void 0:u.sender.nickname}(${(t=s.data)==null?void 0:t.sender.user_id}) 的消息： ${s.message} ${(p=s.data)==null?void 0:p.message_id}`):s.name=="notice"?n+=w(r,o,e,s.data):s.name=="request"&&(n+=B(r,o,e,s.data)),n}function w(s,n,r,e){let o="";if(s=="group_increase")o=`新成员 (${n}) 进入了群 (${r})`;else if(s=="group_decrease")o=`成员 (${n}) 退出了群 (${r})， 操作者为${e==null?void 0:e.operator_id}`;else if(s=="offline_file")o=`成员 (${n}) 在群 (${r}) 上传了文件${e==null?void 0:e.file.name}，大小为${e==null?void 0:e.file.size}`;else if(s=="group_recall")o=`成员 (${n}) 在群 (${r}) 撤回了一条消息${e==null?void 0:e.message_id}， 操作者为${e==null?void 0:e.operator_id}`;else if(s=="friend_recall")o=`好友 (${n}) 撤回了一条消息${e==null?void 0:e.message_id}`;else if(s=="notify"){const l=e==null?void 0:e.sub_type;l=="poke"?r?o=`成员 (${n}) 在群 (${r}) 戳了一下你`:o=`好友 (${n}) 戳了一下你`:l=="lucky_king"?o=`成员 (${n}) 在群 (${r}) 取得了群红包运气王`:l=="honor"&&(o=`成员 (${n}) 在群 (${r}) 的成员荣誉发生变更`)}else s=="group_card"?o=`成员 (${n}) 在群 (${r}) 修改了群名片 (${e==null?void 0:e.card_old}-->${e==null?void 0:e.card_new})`:s=="lucky_king"?o=`成员 (${n}) 在群 (${r}) 的成员头衔发生变更 (${e==null?void 0:e.title})`:s=="friend_add"?o=`用户 (${n}) 已添加您为好友`:s=="group_ban"?(e==null?void 0:e.sub_type)=="ban"?o=`成员 (${n}) 在群 (${r}) 被禁言${e==null?void 0:e.duration}秒， 操作者为${e==null?void 0:e.operator_id}`:o=`成员 (${n}) 在群 (${r}) 被接触禁言， 操作者为${e==null?void 0:e.operator_id}`:s=="group_admin"&&((e==null?void 0:e.sub_type)=="set"?o=`成员 (${n}) 在群 (${r}) 被设置为管理员身份`:o=`管理员 (${n}) 在群 (${r}) 被取消管理员身份`);return o}function B(s,n,r,e){let o="";return s=="friend"?o=`用户 (${n}) 申请添加您为好友，理由为：${e==null?void 0:e.comment}`:s=="group"&&(o=`用户 (${n}) 申请加入群聊，理由为： (${r})， 操作者为${e==null?void 0:e.operator_id}`),o}return S(()=>{v()}),(s,n)=>{const r=f("el-button"),e=f("el-scrollbar"),o=f("el-card");return m(),W(o,{style:{"max-height":"90vh"}},{header:c(()=>[$("div",A,[G,h(r,{type:"success",style:{"margin-left":"10px"},size:"small",onClick:_},{default:c(()=>[E("WS设置")]),_:1})])]),default:c(()=>[$("div",H,[h(e,{ref_key:"scrollbar",ref:b},{default:c(()=>[$("div",J,[(m(!0),x(V,null,q(I(C),(l,i)=>(m(),x("div",{key:i,class:L(["log-item",`${l.level.toLowerCase()}`])},O(y(l)),3))),128))])]),_:1},512)])]),_:1})}}});export{Y as default};
