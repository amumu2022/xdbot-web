import{d as T,k as V,N as H,r,o as c,i as h,j as l,g as d,e,c as U,F as j,v as I,f as w,h as C,z as J,aG as P,U as W,ay as v,ah as X,ai as Y,_ as Z}from"./index-6f723797.js";import{u as z}from"./hooks-ea9aeb9a.js";import{f as ee}from"./rule-cfff3bf3.js";import{g as le,e as ae,f as te}from"./group-565bc2d4.js";import{R as oe}from"./refresh-74425c09.js";import{S as se}from"./save-3-fill-02caf019.js";const S=y=>(X("data-v-12225f4c"),y=y(),Y(),y),ne={class:"tab-container"},ue=S(()=>d("div",{class:"card-header"},[d("span",{class:"font-medium"},"全局管理设置")],-1)),de={class:"static-content-item"},re={style:{display:"flex","flex-wrap":"wrap",gap:"10px","justify-content":"center"}},ie=S(()=>d("div",{class:"card-header"},[d("span",{class:"font-medium"},"发信设置")],-1)),pe=S(()=>d("div",{class:"card-header"},[d("span",{class:"font-medium"},"其他设置")],-1)),me=S(()=>d("div",{class:"card-header"},[d("span",{class:"font-medium"},"动态推送设置 【将会推送给主人账号】 ")],-1)),ce={class:"static-content-item"},fe=T({__name:"Golbal",props:{formInline:{default:()=>({group:{bot_id:"",host:"",email:"",adjutantList:[],update_switch:!1},sendmsg:{private:!1,private_pic:!1,dialogue:!1},other:{friend_req:1,friend_ref_msg:"",friend_msg:"你好啊！我是小木同学，很高兴认识你",invate_req:1,invate_ref_msg:"",invate_msg:"大家好！我是小木同学，很高兴认识大家"},dynamic:{be_ban:!1,be_kicked:!1,be_promoted:!1,be_reduce:!1,accept_msg:!1,other:!1}})}},setup(y){const N=y,B=[{value:1,label:"同意"},{value:2,label:"拒绝"},{value:3,label:"忽略"}],t=V(N.formInline),R=V([]),O=V();async function G(n){var a;if(n!==""){const p=await te(n);if(p.code===200){const s=p.data||t.value;s.group=s.group||t.value.group,s.sendmsg=s.sendmsg||t.value.sendmsg,s.other=s.other||t.value.other,s.dynamic=s.dynamic||t.value.dynamic,t.value=s,t.value.group.bot_id=n,i.value=(a=t.value.group)==null?void 0:a.adjutantList}else v(`操作失败，${p.message}`,{type:"error"})}}async function F(){const n=await le();if(n.code===200){const a=n.data;t.value.BotList=a;const p=a.map(f=>({value:f,label:f}));R.value=p,a.length>0?(t.value.group.bot_id=a[0],await G(a[0]),v("刷新成功",{type:"success"})):v("未获取到机器人信息",{type:"warning"})}else v(`操作失败，${n.message}`,{type:"error"})}async function K(){const n=t.value.group.bot_id;if(t.value.group.adjutantList=i.value,n=="")return v("操作失败，请先选中机器人",{type:"error"}),"";const a=await ae(n,t.value);a.code===200?v("保存成功",{type:"success"}):v(`操作失败，${a.message}`,{type:"error"})}const i=V([]),x=V(""),q=V(!1),A=n=>{i.value.splice(i.value.indexOf(n),1),t.value.group.adjutantList=i.value},D=()=>{q.value=!0},$=()=>{if(x.value){const n=x.value;i.value=Array.from(new Set([...i.value,n]))}q.value=!1,x.value=""};async function Q(){await G(t.value.group.bot_id)}return H(i,n=>{t.value.group.adjutantList=n}),(n,a)=>{const p=r("el-option"),f=r("el-select"),s=r("el-form-item"),u=r("el-col"),L=r("el-button"),b=r("el-row"),E=r("el-tag"),_=r("el-input"),k=r("el-card"),m=r("el-switch"),M=r("el-form");return c(),h(M,{model:t.value,ref_key:"formRef",ref:O,rules:w(ee),"label-position":"top","label-width":"80px",size:"default",onSubmit:a[20]||(a[20]=W(()=>{},["prevent"]))},{default:l(()=>[d("div",ne,[e(k,{shadow:"hover",class:"grid-spacing"},{header:l(()=>[ue]),default:l(()=>[e(b,{gutter:20},{default:l(()=>[e(u,{span:18},{default:l(()=>[e(s,{label:"机器账号",prop:"bot_id"},{default:l(()=>[e(f,{modelValue:t.value.group.bot_id,"onUpdate:modelValue":a[0]||(a[0]=o=>t.value.group.bot_id=o),class:"full-width-input",clearable:"",placeholder:"请选择机器人账号",onChange:a[1]||(a[1]=o=>Q())},{default:l(()=>[(c(!0),U(j,null,I(R.value,(o,g)=>(c(),h(p,{key:g,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:6},{default:l(()=>[d("div",de,[e(L,{type:"primary",icon:w(z)(w(oe)),onClick:F},{default:l(()=>[C("刷新")]),_:1},8,["icon"])])]),_:1})]),_:1}),e(s,{label:"副级管理",prop:"adjutantList"},{default:l(()=>[d("div",re,[(c(!0),U(j,null,I(i.value,o=>(c(),h(E,{key:o,class:"mx-1",effect:"dark",closable:"","disable-transitions":!1,onClose:g=>A(o)},{default:l(()=>[C(J(o),1)]),_:2},1032,["onClose"]))),128))]),q.value?(c(),h(_,{key:0,modelValue:x.value,"onUpdate:modelValue":a[2]||(a[2]=o=>x.value=o),class:"ml-1 w-20",placeholder:"请输入副级管理账号",size:"small",onKeyup:P($,["enter"]),onBlur:$},null,8,["modelValue","onKeyup"])):(c(),h(L,{key:1,class:"button-new-tag ml-1",size:"small",onClick:D},{default:l(()=>[C(" + 新增 ")]),_:1}))]),_:1}),e(b,{gutter:20},{default:l(()=>[e(u,{span:12},{default:l(()=>[e(s,{label:"主人账号",prop:"host"},{default:l(()=>[e(_,{modelValue:t.value.group.host,"onUpdate:modelValue":a[3]||(a[3]=o=>t.value.group.host=o),type:"text",clearable:"",placeholder:"请输入主人账号"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(s,{label:"用户邮箱",prop:"email"},{default:l(()=>[e(_,{modelValue:t.value.group.email,"onUpdate:modelValue":a[4]||(a[4]=o=>t.value.group.email=o),placeholder:"请输入用户邮箱",type:"text",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(k,{shadow:"hover",class:"grid-spacing"},{header:l(()=>[ie]),default:l(()=>[e(b,null,{default:l(()=>[e(u,{md:8,sm:8,xs:12},{default:l(()=>[e(s,{label:"私聊开关",prop:"private"},{default:l(()=>[e(m,{modelValue:t.value.sendmsg.private,"onUpdate:modelValue":a[5]||(a[5]=o=>t.value.sendmsg.private=o),"inline-prompt":"",class:"switch","active-text":"已开启","inactive-text":"已关闭"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{md:8,sm:8,xs:12},{default:l(()=>[e(s,{label:"临时对话",prop:"dialogue"},{default:l(()=>[e(m,{modelValue:t.value.sendmsg.dialogue,"onUpdate:modelValue":a[6]||(a[6]=o=>t.value.sendmsg.dialogue=o),"inline-prompt":"",class:"switch","active-text":"已开启","inactive-text":"已关闭"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{md:8,sm:8,xs:12},{default:l(()=>[e(s,{label:"私聊图片",prop:"private_pic"},{default:l(()=>[e(m,{modelValue:t.value.sendmsg.private_pic,"onUpdate:modelValue":a[7]||(a[7]=o=>t.value.sendmsg.private_pic=o),"inline-prompt":"",class:"switch","active-text":"已开启","inactive-text":"已关闭"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(k,{shadow:"hover",class:"grid-spacing"},{header:l(()=>[pe]),default:l(()=>[e(b,null,{default:l(()=>[e(u,{md:12,sm:12,xs:24},{default:l(()=>[e(s,{label:"好友请求",prop:"friend_req"},{default:l(()=>[e(f,{modelValue:t.value.other.friend_req,"onUpdate:modelValue":a[8]||(a[8]=o=>t.value.other.friend_req=o),clearable:""},{default:l(()=>[(c(),U(j,null,I(B,(o,g)=>e(p,{key:g,label:o.label,value:o.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{md:12,sm:12,xs:24},{default:l(()=>[e(s,{label:"拒绝理由",prop:"friend_ref_msg",style:{color:"#ff4949"}},{default:l(()=>[e(_,{modelValue:t.value.other.friend_ref_msg,"onUpdate:modelValue":a[9]||(a[9]=o=>t.value.other.friend_ref_msg=o),type:"text",placeholder:"请输入拒绝理由",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{label:"发送信息",prop:"friend_msg"},{default:l(()=>[e(_,{modelValue:t.value.other.friend_msg,"onUpdate:modelValue":a[10]||(a[10]=o=>t.value.other.friend_msg=o),type:"text",clearable:""},null,8,["modelValue"])]),_:1}),e(b,null,{default:l(()=>[e(u,{md:12,sm:12,xs:24},{default:l(()=>[e(s,{label:"邀群请求",prop:"invate_req"},{default:l(()=>[e(f,{modelValue:t.value.other.invate_req,"onUpdate:modelValue":a[11]||(a[11]=o=>t.value.other.invate_req=o),clearable:""},{default:l(()=>[(c(),U(j,null,I(B,(o,g)=>e(p,{key:g,label:o.label,value:o.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{md:12,sm:12,xs:24},{default:l(()=>[e(s,{label:"拒绝理由",prop:"invate_ref_msg"},{default:l(()=>[e(_,{modelValue:t.value.other.invate_ref_msg,"onUpdate:modelValue":a[12]||(a[12]=o=>t.value.other.invate_ref_msg=o),type:"text",placeholder:"请输入拒绝理由",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{label:"发送信息",prop:"invate_msg"},{default:l(()=>[e(_,{modelValue:t.value.other.invate_msg,"onUpdate:modelValue":a[13]||(a[13]=o=>t.value.other.invate_msg=o),type:"text",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(k,{shadow:"hover",class:"grid-spacing"},{header:l(()=>[me]),default:l(()=>[e(b,null,{default:l(()=>[e(u,{md:8,sm:8,xs:12},{default:l(()=>[e(s,{label:"我被禁言",prop:"be_ban"},{default:l(()=>[e(m,{modelValue:t.value.dynamic.be_ban,"onUpdate:modelValue":a[14]||(a[14]=o=>t.value.dynamic.be_ban=o),"inline-prompt":"",class:"switch","active-text":"已开启","inactive-text":"已关闭"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{md:8,sm:8,xs:12},{default:l(()=>[e(s,{label:"我被踢出",prop:"be_kicked"},{default:l(()=>[e(m,{modelValue:t.value.dynamic.be_kicked,"onUpdate:modelValue":a[15]||(a[15]=o=>t.value.dynamic.be_kicked=o),"inline-prompt":"",class:"switch","active-text":"已开启","inactive-text":"已关闭"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{md:8,sm:8,xs:12},{default:l(()=>[e(s,{label:"我被升官",prop:"be_promoted"},{default:l(()=>[e(m,{modelValue:t.value.dynamic.be_promoted,"onUpdate:modelValue":a[16]||(a[16]=o=>t.value.dynamic.be_promoted=o),"inline-prompt":"",class:"switch","active-text":"已开启","inactive-text":"已关闭"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{md:8,sm:8,xs:12},{default:l(()=>[e(s,{label:"我被降管",prop:"be_reduce"},{default:l(()=>[e(m,{modelValue:t.value.dynamic.be_reduce,"onUpdate:modelValue":a[17]||(a[17]=o=>t.value.dynamic.be_reduce=o),"inline-prompt":"",class:"switch","active-text":"已开启","inactive-text":"已关闭"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{md:8,sm:8,xs:12},{default:l(()=>[e(s,{label:"收到私信",prop:"accept_msg"},{default:l(()=>[e(m,{modelValue:t.value.dynamic.accept_msg,"onUpdate:modelValue":a[18]||(a[18]=o=>t.value.dynamic.accept_msg=o),"inline-prompt":"",class:"switch","active-text":"已开启","inactive-text":"已关闭"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{md:8,sm:8,xs:12},{default:l(()=>[e(s,{label:"等待添加",prop:"other"},{default:l(()=>[e(m,{modelValue:t.value.dynamic.other,"onUpdate:modelValue":a[19]||(a[19]=o=>t.value.dynamic.other=o),"inline-prompt":"",class:"switch","active-text":"已开启","inactive-text":"已关闭"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),d("div",ce,[e(L,{type:"success",icon:w(z)(w(se)),onClick:K},{default:l(()=>[C("保存全局设置")]),_:1},8,["icon"])])])]),_:1},8,["model","rules"])}}});const xe=Z(fe,[["__scopeId","data-v-12225f4c"]]);export{xe as default};
