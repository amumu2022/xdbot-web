import{R as ReCol}from"./index-80faaafb.js";import{Y as reactive,d as defineComponent,k as ref,bi as Oo,r as resolveComponent,o as openBlock,i as createBlock,j as withCtx,e as createVNode,f as unref,c as createElementBlock,F as Fragment,v as renderList,h as createTextVNode,ay as message,aI as addDialog,ae as h}from"./index-6f723797.js";import{_ as _sfc_main$1}from"./index.vue_vue_type_script_setup_true_lang-aaaaaf62.js";import{R as RunAPI}from"./main-e872c8ee.js";import{_ as _sfc_main$2}from"./formPrimitive.vue_vue_type_script_setup_true_lang-d7435083.js";const formRules=reactive({keyword:[{required:!0,message:"关键词为必填项",trigger:"blur"}],url:[{required:!0,message:"接口地址为必填项",trigger:"blur"},{validator:(a,e,o)=>{e&&e.startsWith("http")?o():o(new Error("路由必须`http`开头"))},trigger:"blur"}],back_set:[{required:!0,message:"返回内容为必填项",trigger:"blur"}],test:[{required:!0,message:"测试语句为必填项",trigger:"blur"}]}),_sfc_main=defineComponent({__name:"form",props:{formInline:{default:()=>({title:"新增",url:"",keyword:"",method:"",value_num:"",rule:"",back_set:"",test:"",encode:"utf-8",headers:"",body:"",cookie:"",enable:""})}},setup(__props,{expose:__expose}){const props=__props,methodOptions=[{value:"get",label:"get"},{value:"post",label:"post"},{value:"put",label:"put"},{value:"delete",label:"delete"}],encodeOptions=[{value:"utf-8",label:"utf-8"},{value:"gbk",label:"gbk"}],newFormInline=ref(props.formInline),back_msg=ref(""),title=ref(props.formInline.title);title.value==="新增"&&(newFormInline.value.method=methodOptions[0].value,newFormInline.value.encode=encodeOptions[0].value);const ruleFormRef=ref();function calculateTextareaRows(a){if(a){const e=a.split(`
`).length;return Math.max(e,1)}return 1}function getRef(){return ruleFormRef.value}const{clipboardValue,copied}=Oo();function copyStringDC(){clipboardValue.value=unref(back_msg),copied.value?message("复制成功",{type:"success"}):message("复制失败，请检查是否为空",{type:"warning"})}function RunDemo(a){RunAPI(a).then(async e=>{e.code===200?(message("测试成功",{type:"success"}),back_msg.value=e.data):message(`${e.message}`,{type:"error"})})}const formPrimitiveParam=ref(""),resetFormPrimitiveParam=ref(formPrimitiveParam.value);function InputData(){addDialog({width:"30%",title:"导入数据",contentRenderer:()=>h(_sfc_main$2,{data:formPrimitiveParam.value,"onUpdate:data":a=>formPrimitiveParam.value=a}),closeCallBack:()=>{const data=eval("("+formPrimitiveParam.value+")");newFormInline.value.keyword=data.keyword,newFormInline.value.url=data.url,newFormInline.value.method=data.method,newFormInline.value.back_set=decodeURIComponent(atob(data.back_set)),newFormInline.value.rule=decodeURIComponent(atob(data.rule)),newFormInline.value.test=data.test,newFormInline.value.encode=data.encode,newFormInline.value.headers=decodeURIComponent(atob(data.headers)),newFormInline.value.body=decodeURIComponent(atob(data.body)),newFormInline.value.cookie=decodeURIComponent(atob(data.cookie)),formPrimitiveParam.value=resetFormPrimitiveParam.value}})}return __expose({getRef}),(a,e)=>{const o=resolveComponent("el-input"),t=resolveComponent("el-form-item"),u=resolveComponent("el-option"),d=resolveComponent("el-select"),r=resolveComponent("el-button"),m=resolveComponent("el-row"),s=resolveComponent("el-form");return openBlock(),createBlock(s,{ref_key:"ruleFormRef",ref:ruleFormRef,model:newFormInline.value,rules:unref(formRules),"label-position":"top","label-width":"82px"},{default:withCtx(()=>[createVNode(m,{gutter:40},{default:withCtx(()=>[createVNode(unref(ReCol),{value:12,xs:24,sm:24},{default:withCtx(()=>[createVNode(t,{label:"触发语句",prop:"keyword"},{default:withCtx(()=>[createVNode(o,{modelValue:newFormInline.value.keyword,"onUpdate:modelValue":e[0]||(e[0]=l=>newFormInline.value.keyword=l),clearable:"",placeholder:"请输入触发语句"},null,8,["modelValue"])]),_:1})]),_:1}),createVNode(unref(ReCol),{value:12,xs:24,sm:24},{default:withCtx(()=>[createVNode(t,{label:"测试语句",prop:"test"},{default:withCtx(()=>[createVNode(o,{modelValue:newFormInline.value.test,"onUpdate:modelValue":e[1]||(e[1]=l=>newFormInline.value.test=l),clearable:"",placeholder:"请输入测试语句"},null,8,["modelValue"])]),_:1})]),_:1}),createVNode(unref(ReCol),{value:12,xs:24,sm:24},{default:withCtx(()=>[createVNode(t,{label:"接口地址",prop:"url"},{default:withCtx(()=>[createVNode(o,{modelValue:newFormInline.value.url,"onUpdate:modelValue":e[2]||(e[2]=l=>newFormInline.value.url=l),clearable:"",placeholder:"请输入接口地址"},null,8,["modelValue"])]),_:1})]),_:1}),createVNode(unref(ReCol),{value:12,xs:24,sm:24},{default:withCtx(()=>[createVNode(t,{label:"匹配规则",prop:"rule"},{default:withCtx(()=>[createVNode(o,{modelValue:newFormInline.value.rule,"onUpdate:modelValue":e[3]||(e[3]=l=>newFormInline.value.rule=l),clearable:"",placeholder:"请输入匹配规则"},null,8,["modelValue"])]),_:1})]),_:1}),createVNode(unref(ReCol),{value:12,xs:24,sm:24},{default:withCtx(()=>[createVNode(t,{label:"请求方式",prop:"method"},{default:withCtx(()=>[createVNode(d,{modelValue:newFormInline.value.method,"onUpdate:modelValue":e[4]||(e[4]=l=>newFormInline.value.method=l),placeholder:"请选择请求方式",class:"w-full"},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(methodOptions,(l,n)=>createVNode(u,{key:n,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),createVNode(unref(ReCol),{value:12,xs:24,sm:24},{default:withCtx(()=>[createVNode(t,{label:"编码方式",prop:"encode"},{default:withCtx(()=>[createVNode(d,{modelValue:newFormInline.value.encode,"onUpdate:modelValue":e[5]||(e[5]=l=>newFormInline.value.encode=l),placeholder:"请选择匹配类型",class:"w-full"},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(encodeOptions,(l,n)=>createVNode(u,{key:n,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),createVNode(unref(ReCol),{value:12,xs:24,sm:24},{default:withCtx(()=>[createVNode(t,{label:"请求头",prop:"headers"},{default:withCtx(()=>[createVNode(o,{rows:"2",clearable:"",type:"textarea",modelValue:newFormInline.value.headers,"onUpdate:modelValue":e[6]||(e[6]=l=>newFormInline.value.headers=l),placeholder:"直接复制浏览器数据"},null,8,["modelValue"])]),_:1})]),_:1}),createVNode(unref(ReCol),{value:12,xs:24,sm:24},{default:withCtx(()=>[createVNode(t,{label:"传递参数",prop:"body"},{default:withCtx(()=>[createVNode(o,{rows:"2",type:"textarea",modelValue:newFormInline.value.body,"onUpdate:modelValue":e[7]||(e[7]=l=>newFormInline.value.body=l),clearable:"",placeholder:"直接复制浏览器数据即可"},null,8,["modelValue"])]),_:1})]),_:1}),createVNode(unref(ReCol),{value:24,xs:24,sm:24},{default:withCtx(()=>[createVNode(t,{label:"Cookie",prop:"cookie"},{default:withCtx(()=>[createVNode(o,{rows:calculateTextareaRows(newFormInline.value.cookie),type:"textarea",modelValue:newFormInline.value.cookie,"onUpdate:modelValue":e[8]||(e[8]=l=>newFormInline.value.cookie=l),clearable:"",placeholder:"仅对需要Cookie的进行支持"},null,8,["rows","modelValue"])]),_:1})]),_:1}),createVNode(unref(ReCol),{value:24,xs:24,sm:24},{label:withCtx(()=>[createVNode(_sfc_main$1,{label:"返回内容",description:"在这里设置返回的内容模板"})]),default:withCtx(()=>[createVNode(t,{label:"返回内容",prop:"back_set"},{default:withCtx(()=>[createVNode(o,{rows:"4",type:"textarea",modelValue:newFormInline.value.back_set,"onUpdate:modelValue":e[9]||(e[9]=l=>newFormInline.value.back_set=l),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),createVNode(unref(ReCol),{value:24,xs:24,sm:24},{default:withCtx(()=>[createVNode(t,{label:"内容展示"},{label:withCtx(()=>[createVNode(_sfc_main$1,{label:"内容展示",description:"测试后将会在这里展示内容"})]),default:withCtx(()=>[createVNode(o,{rows:"4",type:"textarea",value:back_msg.value,"onUpdate:value":e[10]||(e[10]=l=>back_msg.value=l),clearable:"",placeholder:""},null,8,["value"])]),_:1})]),_:1}),createVNode(unref(ReCol),{value:12,xs:24,sm:24,style:{"margin-left":"40px"}},{default:withCtx(()=>[createVNode(r,{type:"primary",class:"button-margin",onClick:e[11]||(e[11]=l=>RunDemo(props.formInline))},{default:withCtx(()=>[createTextVNode(" 测试一下 ")]),_:1}),createVNode(r,{class:"button-margin",type:"danger",onClick:e[12]||(e[12]=l=>InputData())},{default:withCtx(()=>[createTextVNode("导入数据")]),_:1}),createVNode(r,{type:"success",class:"button-margin",onClick:e[13]||(e[13]=l=>copyStringDC())},{default:withCtx(()=>[createTextVNode("复制内容")]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),form_vue_vue_type_style_index_0_lang="";export{_sfc_main as _};
