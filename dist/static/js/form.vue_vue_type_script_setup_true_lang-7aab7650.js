import{Y as M,d as Y,k as r,N as R,r as w,o as n,i as m,j as o,e as a,f as s,b1 as _,g as U,c as B,F as z,v as F,h as g,z as K,aG as G}from"./index-6f723797.js";import{R as y}from"./index-80faaafb.js";const H=M({keyword:[{required:!0,message:"关键词为必填项",trigger:"blur"}],answer:[{required:!0,message:"回复语句为必填项",trigger:"blur"}]}),J={class:"tag-container",style:{display:"flex","flex-wrap":"wrap",gap:"10px","justify-content":"center"}},P={class:"tag-container",style:{display:"flex","flex-wrap":"wrap",gap:"10px","justify-content":"center"}},X=Y({__name:"form",props:{formInline:{default:()=>({title:"新增",keyword:"",answer:"",user:[],group:[]})}},setup(N,{expose:O}){const u=N;function j(l){const t=l.split(`
`).length;return Math.max(t,3)}const V=r(),f=r(u.formInline),p=r(u.formInline.user),i=r(u.formInline.group),d=r(""),x=r(!1),c=r(""),b=r(!1),S=l=>{p.value.splice(p.value.indexOf(l),1),u.formInline.user=p.value},q=l=>{i.value.splice(i.value.indexOf(l),1),u.formInline.group=i.value},A=()=>{x.value=!0},E=()=>{b.value=!0},k=()=>{if(c.value){const l=c.value;p.value=Array.from(new Set([...p.value,l]))}b.value=!1,c.value=""},I=()=>{if(d.value){const l=d.value;i.value=Array.from(new Set([...i.value,l]))}x.value=!1,d.value=""};R(p,l=>{u.formInline.user=l}),R(i,l=>{u.formInline.group=l});function T(){return V.value}return O({getRef:T}),(l,t)=>{const v=w("el-form-item"),C=w("el-tag"),h=w("el-button"),$=w("el-row"),D=w("el-form");return n(),m(D,{ref_key:"ruleFormRef",ref:V,model:f.value,rules:s(H),"label-position":"top","label-width":"82px"},{default:o(()=>[a($,{gutter:30},{default:o(()=>[a(s(y),{value:12,xs:24,sm:24},{default:o(()=>[a(v,{label:"关键词",prop:"keyword"},{default:o(()=>[a(s(_),{modelValue:f.value.keyword,"onUpdate:modelValue":t[0]||(t[0]=e=>f.value.keyword=e),clearable:"",placeholder:"请输入关键词"},null,8,["modelValue"])]),_:1})]),_:1}),a(s(y),{value:12,xs:24,sm:24},{default:o(()=>[a(v,{label:"转发群聊",prop:"group"},{default:o(()=>[U("div",J,[(n(!0),B(z,null,F(i.value,e=>(n(),m(C,{key:e,type:"warning",class:"mx-1",closable:"",effect:"light","disable-transitions":!0,onClose:L=>q(e)},{default:o(()=>[g(K(e),1)]),_:2},1032,["onClose"]))),128))]),x.value?(n(),m(s(_),{key:0,modelValue:d.value,"onUpdate:modelValue":t[1]||(t[1]=e=>d.value=e),placeholder:"请输入群号",class:"ml-1 w-20",size:"small",onKeyup:G(I,["enter"]),onBlur:I},null,8,["modelValue","onKeyup"])):(n(),m(h,{key:1,class:"button-new-tag ml-1",size:"small",onClick:A},{default:o(()=>[g(" + ")]),_:1}))]),_:1})]),_:1}),a(s(y),{value:12,xs:24,sm:24},{default:o(()=>[a(v,{label:"转发用户",prop:"user"},{default:o(()=>[U("div",P,[(n(!0),B(z,null,F(p.value,e=>(n(),m(C,{key:e,class:"mx-1",effect:"light",closable:"","disable-transitions":!1,onClose:L=>S(e)},{default:o(()=>[g(K(e),1)]),_:2},1032,["onClose"]))),128))]),b.value?(n(),m(s(_),{key:0,modelValue:c.value,"onUpdate:modelValue":t[2]||(t[2]=e=>c.value=e),class:"ml-1 w-20",placeholder:"请输入用户账号",size:"small",onKeyup:G(k,["enter"]),onBlur:k},null,8,["modelValue","onKeyup"])):(n(),m(h,{key:1,class:"button-new-tag ml-1",size:"small",onClick:E},{default:o(()=>[g(" + ")]),_:1}))]),_:1})]),_:1}),a(s(y),{value:12,xs:24,sm:24},{default:o(()=>[a(v,{label:"回复语句",prop:"answer"},{default:o(()=>[a(s(_),{type:"textarea",modelValue:f.value.answer,"onUpdate:modelValue":t[3]||(t[3]=e=>f.value.answer=e),rows:j(f.value.answer),clearable:"",placeholder:"请输入回复语句"},null,8,["modelValue","rows"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])}}});export{X as _};
