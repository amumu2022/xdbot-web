import{a as k}from"./upload-f057e19f.js";import{d as b,k as l,r as c,o as m,i as z,j as s,g as F,h as p,c as B,F as C,v as E,e as u,z as N,S as e}from"./index-9cea40a6.js";const S={class:"el-upload__tip"},$=b({__name:"form",setup(D,{expose:_}){const x=l();function f(){return x.value}const i=l(5);l([]);const y=()=>{e(`选择的文件不能超过 ${i.value} `,{type:"warning"})},v=(t,n)=>{e(`已移除文件 ${t.name} `,{type:"warning"})},d=["txt","apk","exe","docx","doc","csv","zip","7z","rar","xlsx","xls","py","json","db","sql","ttf","pdf"],w=async t=>{const n=t.name.split(".").pop().toLowerCase(),r=300*1024*1024;if(!d.includes(n)){e("操作失败，文件格式错误",{type:"error"});return}if(t.size>r){e("操作失败，文件尺寸超过限制",{type:"error"});return}const a=new FormData;a.append("file",t.raw);try{const o=await k(a);o.code===200?e("文件上传成功",{type:"success"}):e(o.message,{type:"error"})}catch(o){e(o,{type:"error"})}};return _({getRef:f}),(t,n)=>{const r=c("el-button"),a=c("el-text"),o=c("el-upload");return m(),z(o,{class:"upload-demo","on-preview":w,"on-remove":v,"on-exceed":y,limit:i.value,"auto-upload":!1,drag:"","list-type":"text",multiple:""},{tip:s(()=>[F("div",S,[p(" 仅支持大小不超过300Mb的文件格式： "),(m(),B(C,null,E(d,(g,h)=>u(a,{key:h,class:"mx-1",type:"warning"},{default:s(()=>[p(N(`${g}`)+"    ",1)]),_:2},1024)),64))])]),default:s(()=>[u(r,{type:"primary"},{default:s(()=>[p("拖拽文件或点击上传")]),_:1})]),_:1},8,["limit"])}}});export{$ as _};
