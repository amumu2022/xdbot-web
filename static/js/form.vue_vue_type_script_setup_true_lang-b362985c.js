import{$ as L,d as D,k as f,al as $,O as B,L as U,e as l,b2 as S,ag as C,A as N,b4 as O,r as _,o as i,i as c,j as n,f as s,g as A,z as M,c as q,B as b,w as F,by as P,a9 as T}from"./index-9cea40a6.js";import{R as m}from"./index-17695056.js";import{u as X}from"./hooks-678b71c4.js";const j=L({name:[{required:!0,message:"菜单名称为必填项",trigger:"blur"}],url:[{required:!0,message:"路由路径为必填项",trigger:"blur"}],code:[{required:!0,message:"权限标识为必填项",trigger:"blur"}]});const z={options:{type:Array,default:()=>[]},defaultValue:{type:Number,default:0}},E=D({name:"ReSegmented",props:z,emits:["change"],setup(y,{emit:w}){const k=f(0),g=f(0),{isDark:e}=$(),h=f(!1),V=f(-1),u=f(""),o=N(),v=f(y.defaultValue);function R({option:a,index:r},d){a.disabled||(d.preventDefault(),v.value=r,u.value="",w("change",{index:r,option:a}))}function p({option:a,index:r},d){d.preventDefault(),V.value=r,a.disabled||v.value===r?u.value="":u.value=e.value?"#1f1f1f":"rgba(0, 0, 0, 0.06)"}function x(a,r){r.preventDefault(),V.value=-1}function I(a=v.value){U(()=>{var d;const r=(d=o==null?void 0:o.proxy)==null?void 0:d.$refs[`labelRef${a}`];k.value=r.clientWidth,g.value=r.offsetLeft,h.value=!0})}B(()=>v.value,a=>{U(()=>{I(a)})},{deep:!0,immediate:!0});const t=()=>y.options.map((a,r)=>l("label",{ref:`labelRef${r}`,class:["pure-segmented-item",(a==null?void 0:a.disabled)&&"pure-segmented-item-disabled"],style:{background:V.value===r?u.value:"",color:!a.disabled&&(v.value===r||V.value===r)?e.value?"rgba(255, 255, 255, 0.85)":"rgba(0,0,0,.88)":""},onMouseenter:d=>p({option:a,index:r},d),onMouseleave:d=>x({option:a,index:r},d),onClick:d=>R({option:a,index:r},d)},[l("input",{type:"radio",name:"segmented"},null),l("div",{class:"pure-segmented-item-label"},[a.icon&&!S(a.label)?l("span",{class:"pure-segmented-item-icon",style:{marginRight:a.label?"6px":0}},[C(X(a.icon))]):null,a.label?S(a.label)?C(a.label):l("span",null,[a.label]):null])]));return()=>l("div",{class:"pure-segmented"},[l("div",{class:"pure-segmented-group"},[l("div",{class:"pure-segmented-item-selected",style:{width:`${k.value}px`,transform:`translateX(${g.value}px)`,display:h.value?"block":"none"}},null),t()])])}}),W=O(E),G=W,H=[{label:"菜单",value:0},{label:"iframe",value:1},{label:"外链",value:2},{label:"按钮",value:3}],J={key:0},Z=D({__name:"form",props:{formInline:{default:()=>({open_type:0,higherMenuOptions:[],parent_id:0,title:"",name:"",url:"",menu_name:"",sort:99,redirect:"",icon:"",code:"",keepAlive:!0,showLink:!0,showParent:!1})}},setup(y,{expose:w}){const k=y,g=f(),e=f(k.formInline);function h(){return g.value}return w({getRef:h}),(V,u)=>{const o=_("el-form-item"),v=_("el-cascader"),R=_("el-input-number"),p=_("el-input"),x=_("el-row"),I=_("el-form");return i(),c(I,{ref_key:"ruleFormRef",ref:g,model:e.value,rules:s(j),"label-width":"82px"},{default:n(()=>[l(x,{gutter:30},{default:n(()=>[l(s(m),null,{default:n(()=>[l(o,{label:"菜单类型"},{default:n(()=>[l(s(G),{modelValue:e.value.open_type,"onUpdate:modelValue":u[0]||(u[0]=t=>e.value.open_type=t),options:s(H)},null,8,["modelValue","options"])]),_:1})]),_:1}),l(s(m),null,{default:n(()=>[e.value.open_type!==0?(i(),c(o,{key:0,label:"上级菜单"},{default:n(()=>[l(v,{modelValue:e.value.parent_id,"onUpdate:modelValue":u[1]||(u[1]=t=>e.value.parent_id=t),class:"w-full",options:e.value.higherMenuOptions,props:{value:"id",label:"name",emitPath:!1,checkStrictly:!0},clearable:"",filterable:"",placeholder:"请选择上级菜单"},{default:n(({node:t,data:a})=>[A("span",null,M(a.name),1),t.isLeaf?b("",!0):(i(),q("span",J," ("+M(a.children.length)+") ",1))]),_:1},8,["modelValue","options"])]),_:1})):b("",!0)]),_:1}),l(s(m),{value:12,xs:24,sm:24},{default:n(()=>[l(o,{label:"菜单排序"},{default:n(()=>[l(R,{modelValue:e.value.sort,"onUpdate:modelValue":u[2]||(u[2]=t=>e.value.sort=t),class:"w-full!",min:1,max:9999,"controls-position":"right"},null,8,["modelValue"])]),_:1})]),_:1}),F(l(s(m),{value:12,xs:24,sm:24},{default:n(()=>[l(o,{label:"菜单图标"},{default:n(()=>[l(s(P),{modelValue:e.value.icon,"onUpdate:modelValue":u[3]||(u[3]=t=>e.value.icon=t),class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1},512),[[T,e.value.open_type!==3]]),l(s(m),{value:12,xs:24,sm:24},{default:n(()=>[l(o,{label:"菜单名称",prop:"name"},{default:n(()=>[l(p,{modelValue:e.value.name,"onUpdate:modelValue":u[4]||(u[4]=t=>e.value.name=t),clearable:"",placeholder:"请输入菜单名称"},null,8,["modelValue"])]),_:1})]),_:1}),l(s(m),{value:12,xs:24,sm:24},{default:n(()=>[l(o,{label:"权限标识",prop:"code"},{default:n(()=>[l(p,{modelValue:e.value.code,"onUpdate:modelValue":u[5]||(u[5]=t=>e.value.code=t),clearable:"",placeholder:"请输入权限标识"},null,8,["modelValue"])]),_:1})]),_:1}),e.value.open_type!==3?(i(),c(s(m),{key:0,value:12,xs:24,sm:24},{default:n(()=>[e.value.open_type==1?(i(),c(o,{key:0,label:"组件名称",prop:"menu_name"},{default:n(()=>[l(p,{modelValue:e.value.menu_name,"onUpdate:modelValue":u[6]||(u[6]=t=>e.value.menu_name=t),clearable:"",placeholder:"请输入组件定义的name，defineOptions中的name"},null,8,["modelValue"])]),_:1})):b("",!0)]),_:1})):b("",!0),e.value.open_type==0||e.value.open_type==1?(i(),c(s(m),{key:1},{default:n(()=>[l(o,{label:"页面路径",prop:"url"},{default:n(()=>[l(p,{modelValue:e.value.url,"onUpdate:modelValue":u[7]||(u[7]=t=>e.value.url=t),clearable:"",placeholder:"请输入前端项目views文件内的页面路径"},null,8,["modelValue"])]),_:1})]),_:1})):b("",!0),e.value.open_type==3?(i(),c(s(m),{key:2},{default:n(()=>[l(o,{label:"网站地址",prop:"url"},{default:n(()=>[l(p,{modelValue:e.value.url,"onUpdate:modelValue":u[8]||(u[8]=t=>e.value.url=t),clearable:"",placeholder:"请输入外部网站地址或者内部网站相对地址"},null,8,["modelValue"])]),_:1})]),_:1})):b("",!0),e.value.open_type==4?(i(),c(s(m),{key:3},{default:n(()=>[l(o,{label:"网站地址",prop:"url"},{default:n(()=>[l(p,{modelValue:e.value.url,"onUpdate:modelValue":u[9]||(u[9]=t=>e.value.url=t),clearable:"",placeholder:"请输入外部网站地址，必须以https://或者http://开头"},null,8,["modelValue"])]),_:1})]),_:1})):b("",!0)]),_:1})]),_:1},8,["model","rules"])}}});export{Z as _};
