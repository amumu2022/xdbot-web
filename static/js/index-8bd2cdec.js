import{f as g,h as y}from"./monitor-142346d2.js";import{k as a}from"./index-9cea40a6.js";const m=a([]),I=a([]),i=a(!0),p=a(null),l=a(!0);async function r(){try{l.value&&(i.value=!0);const{data:u}=await g(),o=u,n=o.diskInfos,f=n.reduce((e,t)=>e+t.total,0),v=n.reduce((e,t)=>e+t.Used,0)/f*100,{data:c}=await y(),d=c.results.filter(e=>e.online),s=d.reduce((e,t)=>(e.totalRecv+=t.total_recv_messages,e.todayRecv+=t.today_recv_messages,e.totalSend+=t.total_send_messages,e.todaySend+=t.today_send_messages,e),{totalRecv:0,todayRecv:0,totalSend:0,todaySend:0});I.value=d,m.value=[{field:"CPU",value:`${o.cpuInfo.used}%`},{field:"内存",value:`${o.memoryInfo.used}%`},{field:"磁盘",value:`${v.toFixed(1)}%`},{field:"收信总数",value:s.totalRecv},{field:"今日收信",value:s.todayRecv},{field:"发信总数",value:s.totalSend},{field:"今日发信",value:s.todaySend}]}finally{l.value&&(i.value=!1,l.value=!1)}}r();p.value=setInterval(r,6e4);export{I as B,m as c,i as l,p as t};
