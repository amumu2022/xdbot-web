import{d as G,k as V,am as J,r as m,o as S,i as K,j as a,e,h as p,f as s,bv as P,W as R,c as B,F as I,v as z,S as c}from"./index-9cea40a6.js";import{f as D}from"./rule-5568cc9f.js";import{b as F,U as M}from"./dock-9ddcdacf.js";import{a as Q}from"./api-931dde9e.js";import{d as N}from"./orange-3bd0a242.js";import{S as $}from"./save-3-fill-02caf019.js";import{u as v}from"./hooks-678b71c4.js";const oe=G({__name:"email",props:{formInline:{default:()=>({email:{email:"",code:"",observer:""},emailSend:{plain:1,receiving:"",title:"",text:""}})}},setup(k){const L=k,y=V("1"),O=[{value:"smtp.qq.com",label:"smtp.qq.com"},{value:"smtp.126.com",label:"smtp.126.com"},{value:"smtp.163.com",label:"smtp.163.com"},{value:"smtp.mail.yahoo.com.cn",label:"smtp.mail.yahoo.com.cn"},{value:"smtp.sohu.com",label:"smtp.sohu.com"},{value:"smtp.gmail.com",label:"smtp.gmail.com"},{value:"smtp.sina.com.cn",label:"smtp.sina.com.cn"}],T=[{value:0,label:"HTML文本"},{value:1,label:"纯文本"}],g=V();async function _(){const i={name:"email"},{data:l}=await F(i);if(l.length!=0){const o=l[0].data;t.value.email={code:o==null?void 0:o.code,email:o==null?void 0:o.email,observer:o==null?void 0:o.observer}}}async function x(){const i={name:"emailSend"},{data:l}=await F(i);if(l.length!=0){const o=l[0].data;t.value.emailSend={plain:o==null?void 0:o.plain,receiving:o==null?void 0:o.receiving,text:o==null?void 0:o.text,title:o==null?void 0:o.title}}}async function j(){const i={name:"email",data:t.value.email},l=await M("email",i);l.success?(c(l.message,{type:"success"}),_()):c(`操作失败，${l.message}`,{type:"warning"})}async function A(){t.value.emailSend.code=t.value.email.code,t.value.emailSend.observer=t.value.email.observer,t.value.emailSend.email=t.value.email.email;const i=t.value.emailSend,o=await M("emailSend",{name:"emailSend",data:i});if(o.success){const d=await Q(i);d.success?c(d.message,{type:"success"}):c(`操作失败，${d.message}`,{type:"warning"})}else c(`操作失败，${o.message}`,{type:"warning"})}const t=V(L.formInline);return J(()=>{_(),x()}),(i,l)=>{const o=m("el-icon"),d=m("el-input"),u=m("el-form-item"),r=m("el-col"),w=m("el-option"),U=m("el-select"),f=m("el-button"),C=m("el-row"),E=m("el-form"),q=m("el-collapse-item"),H=m("el-collapse"),W=m("el-card");return S(),K(W,null,{default:a(()=>[e(H,{accordion:"",modelValue:y.value,"onUpdate:modelValue":l[9]||(l[9]=n=>y.value=n)},{default:a(()=>[e(q,{name:"1"},{title:a(()=>[p(" 邮箱配置 "),e(o,{class:"header-icon"},{default:a(()=>[e(s(P))]),_:1})]),default:a(()=>[e(E,{model:t.value,ref_key:"formRef",ref:g,rules:s(D),"label-position":"left","label-width":"80px",size:"default",onSubmit:l[3]||(l[3]=R(()=>{},["prevent"]))},{default:a(()=>[e(C,null,{default:a(()=>[e(r,{md:24,sm:24,xs:24},{default:a(()=>[e(u,{label:"邮箱账号",prop:"email"},{default:a(()=>[e(d,{modelValue:t.value.email.email,"onUpdate:modelValue":l[0]||(l[0]=n=>t.value.email.email=n),type:"text",clearable:"",placeholder:"请输入邮箱账号"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{md:24,sm:24,xs:24},{default:a(()=>[e(u,{label:"授权码",prop:"code"},{default:a(()=>[e(d,{modelValue:t.value.email.code,"onUpdate:modelValue":l[1]||(l[1]=n=>t.value.email.code=n),type:"password",clearable:"",placeholder:"请输入授权码"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{md:24,sm:24,xs:24},{default:a(()=>[e(u,{label:"服务地址",prop:"observer"},{default:a(()=>[e(U,{modelValue:t.value.email.observer,"onUpdate:modelValue":l[2]||(l[2]=n=>t.value.email.observer=n),clearable:""},{default:a(()=>[(S(),B(I,null,z(O,(n,b)=>e(w,{key:b,label:n.label,value:n.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(f,{type:"success",icon:s(v)(s($)),onClick:j},{default:a(()=>[p("保存设置")]),_:1},8,["icon"]),e(f,{type:"danger",icon:s(v)(s(N)),onClick:_},{default:a(()=>[p("重载")]),_:1},8,["icon"])]),_:1})]),_:1},8,["model","rules"])]),_:1}),e(q,{title:"邮箱发信",name:"2"},{default:a(()=>[e(E,{model:t.value,ref_key:"formRef",ref:g,rules:s(D),"label-position":"left","label-width":"80px",size:"default",onSubmit:l[8]||(l[8]=R(()=>{},["prevent"]))},{default:a(()=>[e(C,null,{default:a(()=>[e(r,{md:24,sm:24,xs:24},{default:a(()=>[e(u,{label:"发信类型",prop:"plain"},{default:a(()=>[e(U,{modelValue:t.value.emailSend.plain,"onUpdate:modelValue":l[4]||(l[4]=n=>t.value.emailSend.plain=n),clearable:""},{default:a(()=>[(S(),B(I,null,z(T,(n,b)=>e(w,{key:b,label:n.label,value:n.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{md:24,sm:24,xs:24},{default:a(()=>[e(u,{label:"收信账户",prop:"receiving"},{default:a(()=>[e(d,{modelValue:t.value.emailSend.receiving,"onUpdate:modelValue":l[5]||(l[5]=n=>t.value.emailSend.receiving=n),type:"text",clearable:"",placeholder:"请输入收信账户"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{md:24,sm:24,xs:24},{default:a(()=>[e(u,{label:"邮件主题",prop:"title"},{default:a(()=>[e(d,{modelValue:t.value.emailSend.title,"onUpdate:modelValue":l[6]||(l[6]=n=>t.value.emailSend.title=n),type:"text",clearable:"",placeholder:"请输入邮件主题"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{md:24,sm:24,xs:24},{default:a(()=>[e(u,{label:"邮件内容",prop:"text"},{default:a(()=>[e(d,{modelValue:t.value.emailSend.text,"onUpdate:modelValue":l[7]||(l[7]=n=>t.value.emailSend.text=n),rows:"10",resize:"none",clearable:"",type:"textarea",placeholder:"请输入邮件内容"},null,8,["modelValue"])]),_:1})]),_:1}),e(f,{type:"success",icon:s(v)(s($)),onClick:A},{default:a(()=>[p("测试一下")]),_:1},8,["icon"]),e(f,{type:"danger",icon:s(v)(s(N)),onClick:x},{default:a(()=>[p("重载")]),_:1},8,["icon"])]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}}});export{oe as _};
