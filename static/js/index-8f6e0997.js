import{d as pe,t as U,k,S as B,r as i,b as de,o as b,c as R,i as E,j as l,e as o,f as e,F as me,v as _e,aG as G,h as r,B as T,w as fe,g as F,z as ge,M as y,_ as ye}from"./index-9cea40a6.js";import{u as ve}from"./MemberList-6417f018.js";import{P as Ce}from"./delete-667b307a.js";import{u as s}from"./hooks-678b71c4.js";import{U as be}from"./upload-line-f45d985b.js";import{d as x}from"./admin-line-92b9acda.js";import{M as he}from"./more-filled-c44d3178.js";import{E as ke}from"./edit-pen-af58ba35.js";import{d as xe}from"./search-cc37b371.js";import{R as we}from"./refresh-74425c09.js";import{g as Se}from"./group-5566e468.js";import{A as Ve}from"./caret-bottom-d671d9b4.js";import{f as $e}from"./caret-top-26fff531.js";import"./TimeForm.vue_vue_type_script_setup_true_lang-054d23e5.js";import"./index-17695056.js";import"./hooks-a6049d28.js";import"./useBasicLayout-7ee1042a.js";import"./xdteam-5bf4004a.js";import"./lock-password-line-a641d5aa.js";import"./epTheme-f381a1a7.js";const Be={class:"main"},Re={key:0,class:"bg-[var(--el-fill-color-light)] w-full h-[46px] mb-2 pl-4 flex items-center"},Me={class:"flex-auto"},ze={style:{"font-size":"var(--el-font-size-base)"},class:"text-[rgba(42,46,54,0.5)] dark:text-[rgba(220,220,242,0.5)]"},Pe=pe({name:"AccountAuthorize",__name:"index",setup(Ae){U(()=>{v.value=!j.value});function K(){v.value=!v.value}const v=k(!1),M=k(),z=k(),P=k([]);U(async()=>{const u=await Se();if(u.code===200){const n=u.data,_=n.map(p=>({value:p,label:p}));P.value=_,n.length>0?B("刷新成功",{type:"success"}):B("未获取到机器人信息",{type:"warning"})}else B(`操作失败，${u.message}`,{type:"error"})});function w(){const u=S.value,n=L(u,c.group_id,c.group_name);S.value=n}function L(u,n,_){return u.filter(p=>{const f=n?p.group_id.toString().includes(n):!0,h=_?p.group_name.includes(_):!0;return f&&h})}const{form:c,loading:A,columns:Q,isMobile:j,dataList:S,pagination:I,selectedNum:D,buttonClass:m,onbatchQuit:O,onbatchSign:q,onSelectionCancel:H,handleSelectionChange:J,exportExcel:W,onSearch:N,resetForm:X,QuitGroup:Y,SignGroup:Z,handleSizeChange:ee,handleCurrentChange:oe,handleAuth:le,handleBlack:ne,handleMegBox:te,handleMember:ae}=ve(z);return(u,n)=>{const _=i("el-option"),p=i("el-select"),f=i("el-form-item"),h=i("el-input"),a=i("el-button"),re=i("el-form"),V=i("el-popconfirm"),g=i("el-dropdown-item"),ie=i("el-dropdown-menu"),se=i("el-dropdown"),ce=i("pure-table"),ue=de("motion-fade");return b(),R("div",Be,[v.value?(b(),E(re,{key:0,ref_key:"formRef",ref:M,inline:!0,model:e(c),class:"search-form bg-bg_color w-[99/100] pl-8 pt-[12px]"},{default:l(()=>[o(f,{label:"机器人账号：",prop:"enable"},{default:l(()=>[o(p,{modelValue:e(c).bot_id,"onUpdate:modelValue":n[0]||(n[0]=t=>e(c).bot_id=t),placeholder:"请选择",clearable:"",class:"!w-[160px]",onChange:n[1]||(n[1]=t=>e(N)())},{default:l(()=>[(b(!0),R(me,null,_e(P.value,(t,$)=>(b(),E(_,{key:$,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(f,{label:"群号：",prop:"group_id"},{default:l(()=>[o(h,{modelValue:e(c).group_id,"onUpdate:modelValue":n[2]||(n[2]=t=>e(c).group_id=t),placeholder:"请输入群号",clearable:"",class:"!w-[160px]",onKeyup:n[3]||(n[3]=G(t=>w(),["enter"]))},null,8,["modelValue"])]),_:1}),o(f,{label:"群名：",prop:"group_name"},{default:l(()=>[o(h,{modelValue:e(c).group_name,"onUpdate:modelValue":n[4]||(n[4]=t=>e(c).group_name=t),placeholder:"请输入群名",clearable:"",class:"!w-[160px]",onKeyup:n[5]||(n[5]=G(t=>w(),["enter"]))},null,8,["modelValue"])]),_:1}),o(f,null,{default:l(()=>[o(a,{type:"primary",icon:e(s)(e(xe)),loading:e(A),onClick:w},{default:l(()=>[r(" 搜索 ")]),_:1},8,["icon","loading"]),o(a,{icon:e(s)(e(we)),onClick:n[6]||(n[6]=t=>e(X)(M.value))},{default:l(()=>[r(" 重置 ")]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])):T("",!0),o(e(Ce),{title:"群聊列表",columns:e(Q),onRefresh:e(N)},{buttons:l(()=>[o(a,{type:"success",onClick:e(W)},{default:l(()=>[r("导出")]),_:1},8,["onClick"]),o(a,{onClick:K,icon:v.value?e(s)(e($e)):e(s)(e(Ve))},null,8,["icon"])]),default:l(({size:t,dynamicColumns:$})=>[e(D)>0?fe((b(),R("div",Re,[F("div",Me,[F("span",ze," 已选 "+ge(e(D))+" 项 ",1),o(a,{type:"primary",text:"",onClick:e(H)},{default:l(()=>[r(" 取消选择 ")]),_:1},8,["onClick"])]),o(V,{title:"是否确认退群?",onConfirm:e(O)},{reference:l(()=>[o(a,{type:"danger",text:"",class:"mr-1"},{default:l(()=>[r(" 批量退群 ")]),_:1})]),_:1},8,["onConfirm"]),o(V,{title:"是否确认批量签到?",onConfirm:e(q)},{reference:l(()=>[o(a,{type:"primary",text:"",class:"mr-1"},{default:l(()=>[r(" 批量签到 ")]),_:1})]),_:1},8,["onConfirm"])])),[[ue]]):T("",!0),o(ce,{"row-key":"id",ref_key:"tableRef",ref:z,adaptive:"",stripe:"","align-whole":"center",showOverflowTooltip:"","table-layout":"auto",loading:e(A),size:t,data:e(S),columns:$,pagination:e(I),paginationSmall:t==="small","header-cell-style":{background:"var(--el-fill-color-light)",color:"var(--el-text-color-primary)"},onSelectionChange:e(J),onPageSizeChange:e(ee),onPageCurrentChange:e(oe)},{operation:l(({row:d})=>[o(se,null,{dropdown:l(()=>[o(ie,null,{default:l(()=>[o(g,null,{default:l(()=>[o(a,{class:y(e(m)),link:"",type:"primary",size:t,icon:e(s)(e(be)),onClick:C=>e(ae)(d)},{default:l(()=>[r(" 查看群成员 ")]),_:2},1032,["class","size","icon","onClick"])]),_:2},1024),o(g,null,{default:l(()=>[o(a,{class:y(e(m)),link:"",type:"primary",size:t,icon:e(s)(e(ke)),onClick:C=>e(le)(d)},{default:l(()=>[r(" 授权本群 ")]),_:2},1032,["class","size","icon","onClick"])]),_:2},1024),o(g,null,{default:l(()=>[o(V,{title:`是否确认退出群【${d.group_id}】`,onConfirm:C=>e(Y)(d)},{reference:l(()=>[o(a,{class:y(e(m)),link:"",type:"primary",size:t,icon:e(s)(e(x))},{default:l(()=>[r(" 退出此群 ")]),_:2},1032,["class","size","icon"])]),_:2},1032,["title","onConfirm"])]),_:2},1024),o(g,null,{default:l(()=>[o(a,{class:y(e(m)),link:"",type:"primary",size:t,icon:e(s)(e(x)),onClick:C=>e(ne)(d)},{default:l(()=>[r(" 加黑此群 ")]),_:2},1032,["class","size","icon","onClick"])]),_:2},1024),o(g,null,{default:l(()=>[o(a,{class:y(e(m)),link:"",type:"primary",size:t,icon:e(s)(e(x)),onClick:C=>e(te)(d)},{default:l(()=>[r(" 发送信息 ")]),_:2},1032,["class","size","icon","onClick"])]),_:2},1024),o(g,null,{default:l(()=>[o(a,{class:y(e(m)),link:"",type:"primary",size:t,icon:e(s)(e(x)),onClick:C=>e(Z)(d)},{default:l(()=>[r(" 群打卡 ")]),_:2},1032,["class","size","icon","onClick"])]),_:2},1024)]),_:2},1024)]),default:l(()=>[o(a,{class:"ml-3 mt-[2px]",link:"",type:"primary",size:t,icon:e(s)(e(he))},null,8,["size","icon"])]),_:2},1024)]),_:2},1032,["loading","size","data","columns","pagination","paginationSmall","header-cell-style","onSelectionChange","onPageSizeChange","onPageCurrentChange"])]),_:1},8,["columns","onRefresh"])])}}});const eo=ye(Pe,[["__scopeId","data-v-028521b9"]]);export{eo as default};
