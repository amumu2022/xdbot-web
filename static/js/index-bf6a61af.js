import{f as U}from"./monitor-142346d2.js";import{d as V,k as n,am as A,aF as L,r as s,b as z,w as E,o as c,c as y,e,j as a,F as T,v as M,i as N,h as C,z as G,aj as R,ak as W,g as f,_ as q}from"./index-9cea40a6.js";const p=i=>(R("data-v-6af6e6cb"),i=i(),W(),i),H={class:"main"},J=p(()=>f("span",null,"CPU",-1)),K=p(()=>f("span",null,"内存",-1)),O=p(()=>f("span",null,"服务器信息",-1)),Q=p(()=>f("span",null,"Python信息",-1)),X=p(()=>f("span",null,"磁盘状态",-1)),Y=V({name:"ServersMonitor",__name:"index",setup(i){const v=n(!0),h=n(null),b=n([]),w=n([]),g=n([]),B=n([]),x=n([]);async function S(){v.value=!0;const{data:_}=await U().finally(()=>{v.value=!1}),l=_;b.value=[{field:"核心数",value:l.cpuInfo.cpuNum},{field:"用户使用率",value:l.cpuInfo.used+"%"},{field:"系统使用率",value:l.cpuInfo.sys+"%"},{field:"当前空闲率",value:l.cpuInfo.free+"%"}],w.value=[{field:"总内存",machine:l.memoryInfo.total+"GB",jvm:l.SwapmemoryInfo.total+"MB"},{field:"已用内存",machine:l.memoryInfo.used+"GB",jvm:l.SwapmemoryInfo.used+"MB"},{field:"剩余内存",machine:l.memoryInfo.free+"GB",jvm:l.SwapmemoryInfo.free+"MB"},{field:"使用率",machine:l.memoryInfo.usage+"%",jvm:l.SwapmemoryInfo.usage+"%",warning:l.SwapmemoryInfo.usage>30}],g.value=[{field:"服务器名称",value:l.systemInfo.computerName},{field:"操作系统",value:l.systemInfo.osName},{field:"服务器IP",value:l.systemInfo.computerIp},{field:"系统架构",value:l.systemInfo.osArch}],B.value=[{field:"Python名称",value:"Cpython",span:1},{field:"Python版本",value:l.python,span:1},{field:"启动时间",value:l.systemInfo.startTime,span:1},{field:"运行时长",value:l.systemInfo.runTime,span:1}],x.value=l.diskInfos}function P({row:_}){if(_.warning)return"text-red-500"}return A(()=>{S(),h.value=setInterval(S,2e4)}),L(()=>{h.value!==null&&clearInterval(h.value)}),(_,l)=>{const o=s("el-table-column"),I=s("el-table"),r=s("el-card"),d=s("el-col"),u=s("el-row"),k=s("el-descriptions-item"),j=s("el-descriptions"),F=z("loading");return E((c(),y("div",H,[e(u,{gutter:30},{default:a(()=>[e(d,{lg:12,xs:24,sm:24,class:"card-box"},{default:a(()=>[e(r,{shadow:"hover"},{header:a(()=>[J]),default:a(()=>[e(I,{data:b.value,"show-header":!0,style:{width:"100%"}},{default:a(()=>[e(o,{prop:"field",label:"属性"}),e(o,{prop:"value",label:"值"})]),_:1},8,["data"])]),_:1})]),_:1}),e(d,{lg:12,xs:24,sm:24},{default:a(()=>[e(r,{shadow:"hover"},{header:a(()=>[K]),default:a(()=>[e(I,{data:w.value,"show-header":!0,style:{width:"100%"},"cell-class-name":P},{default:a(()=>[e(o,{prop:"field",label:"属性"}),e(o,{prop:"machine",label:"服务器"}),e(o,{prop:"jvm",label:"虚拟内存"})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(d,{span:24},{default:a(()=>[e(r,{shadow:"hover"},{header:a(()=>[O]),default:a(()=>[e(j,{column:2},{default:a(()=>[(c(!0),y(T,null,M(g.value,(t,m)=>(c(),N(k,{key:m,label:t.field},{default:a(()=>[C(G(t.value),1)]),_:2},1032,["label"]))),128))]),_:1})]),_:1})]),_:1})]),_:1}),e(u,{gutter:20},{default:a(()=>[e(d,{span:24},{default:a(()=>[e(r,{shadow:"hover"},{header:a(()=>[Q]),default:a(()=>[e(j,{column:2},{default:a(()=>[(c(!0),y(T,null,M(B.value,(t,m)=>(c(),N(k,{key:m,label:t.field,span:t.span},{default:a(()=>[C(G(t.value),1)]),_:2},1032,["label","span"]))),128))]),_:1})]),_:1})]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(d,{span:24},{default:a(()=>[e(r,{shadow:"hover"},{header:a(()=>[X]),default:a(()=>[e(I,{data:x.value,"show-header":!0,style:{width:"100%"}},{default:a(()=>[e(o,{prop:"name",label:"盘符名称"}),e(o,{prop:"total",label:"总大小 (GB)"}),e(o,{prop:"Free",label:"可用大小 (GB)"}),e(o,{prop:"Used",label:"已用大小 (GB)"}),e(o,{prop:"Read",label:"读取速度 (MB/s)"}),e(o,{prop:"Write",label:"写入速度 (MB/s)"}),e(o,{prop:"usage",label:"已用百分比",formatter:(t,m,D)=>D+"%",width:"180"},null,8,["formatter"])]),_:1},8,["data"])]),_:1})]),_:1})]),_:1}),e(u)])),[[F,v.value]])}}});const ee=q(Y,[["__scopeId","data-v-6af6e6cb"]]);export{ee as default};
