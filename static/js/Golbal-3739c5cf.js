import{d as T,k as V,O as W,r,o as f,i as h,j as l,g as i,e,c as U,F as j,v as I,f as w,h as C,z as H,aG as J,W as P,S as v,aj as X,ak as Y,_ as Z}from"./index-9cea40a6.js";import{u as F}from"./hooks-678b71c4.js";import{f as ee}from"./rule-56d2c065.js";import{g as le,e as ae,f as te}from"./group-5566e468.js";import{R as oe}from"./refresh-74425c09.js";import{S as se}from"./save-3-fill-02caf019.js";const S=y=>(X("data-v-9a4b3a64"),y=y(),Y(),y),ne={class:"tab-container"},ue=S(()=>i("div",{class:"card-header"},[i("span",{class:"font-medium"},"全局管理设置")],-1)),de={class:"static-content-item"},ie={style:{display:"flex","flex-wrap":"wrap",gap:"10px","justify-content":"center"}},re=S(()=>i("div",{class:"card-header"},[i("span",{class:"font-medium"},"发信设置")],-1)),me=S(()=>i("div",{class:"card-header"},[i("span",{class:"font-medium"},"其他设置")],-1)),pe=S(()=>i("div",{class:"card-header"},[i("span",{class:"font-medium"},"动态推送设置 【将会推送给主人账号】 ")],-1)),ce={class:"static-content-item"},fe=T({__name:"Golbal",props:{formInline:{default:()=>({group:{bot_id:"",host:"",email:"",adjutantList:[],update_switch:!1},sendmsg:{private:!1,private_pic:!1,dialogue:!1},other:{friend_req:1,friend_ref_msg:"",friend_msg:"你好啊！我是小木同学，很高兴认识你",invite_req:1,invite_ref_msg:"",invite_msg:"大家好！我是小木同学，很高兴认识大家"},dynamic:{be_ban:!1,be_kicked:!1,be_promoted:!1,be_reduce:!1,accept_msg:!1,other:!1}})}},setup(y){const B=y,R=[{value:1,label:"同意"},{value:2,label:"拒绝"},{value:3,label:"忽略"}],o=V(B.formInline),G=V([]),O=V();async function $(n){var a;if(n!==""){const p=await te(n);if(p.code===200){O.value.resetFields();const d=p.data,s=B.formInline;d.group=d.group||s.group,d.sendmsg=d.sendmsg||s.sendmsg,d.other=d.other||s.other,d.dynamic=d.dynamic||s.dynamic,o.value={...d},o.value.group.bot_id=n,m.value=(a=o.value.group)==null?void 0:a.adjutantList}else v(`操作失败，${p.message}`,{type:"error"})}}async function D(){const n=await le();if(n.code===200){const a=n.data;o.value.BotList=a;const p=a.map(d=>({value:d,label:d}));G.value=p,a.length>0?(o.value.group.bot_id=a[0],await $(a[0]),v("刷新成功",{type:"success"})):v("未获取到机器人信息",{type:"warning"})}else v(`操作失败，${n.message}`,{type:"error"})}async function K(){const n=o.value.group.bot_id;if(o.value.group.adjutantList=m.value,n=="")return v("操作失败，请先选中机器人",{type:"error"}),"";const a=await ae(n,o.value);a.code===200?v("保存成功",{type:"success"}):v(`操作失败，${a.message}`,{type:"error"})}const m=V([]),x=V(""),q=V(!1),N=n=>{m.value.splice(m.value.indexOf(n),1),o.value.group.adjutantList=m.value},A=()=>{q.value=!0},z=()=>{if(x.value){const n=x.value;m.value=Array.from(new Set([...m.value,n]))}q.value=!1,x.value=""};async function Q(){await $(o.value.group.bot_id)}return W(m,n=>{o.value.group.adjutantList=n}),(n,a)=>{const p=r("el-option"),d=r("el-select"),s=r("el-form-item"),u=r("el-col"),L=r("el-button"),b=r("el-row"),E=r("el-tag"),_=r("el-input"),k=r("el-card"),c=r("el-switch"),M=r("el-form");return f(),h(M,{model:o.value,ref_key:"formRef",ref:O,rules:w(ee),"label-position":"top","label-width":"80px",size:"default",onSubmit:a[20]||(a[20]=P(()=>{},["prevent"]))},{default:l(()=>[i("div",ne,[e(k,{shadow:"hover",class:"grid-spacing"},{header:l(()=>[ue]),default:l(()=>[e(b,{gutter:20},{default:l(()=>[e(u,{span:18},{default:l(()=>[e(s,{label:"机器账号",prop:"bot_id"},{default:l(()=>[e(d,{modelValue:o.value.group.bot_id,"onUpdate:modelValue":a[0]||(a[0]=t=>o.value.group.bot_id=t),class:"full-width-input",clearable:"",placeholder:"请选择机器人账号",onChange:a[1]||(a[1]=t=>Q())},{default:l(()=>[(f(!0),U(j,null,I(G.value,(t,g)=>(f(),h(p,{key:g,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:6},{default:l(()=>[i("div",de,[e(L,{type:"primary",icon:w(F)(w(oe)),onClick:D},{default:l(()=>[C("刷新")]),_:1},8,["icon"])])]),_:1})]),_:1}),e(s,{label:"副级管理",prop:"adjutantList"},{default:l(()=>[i("div",ie,[(f(!0),U(j,null,I(m.value,t=>(f(),h(E,{key:t,class:"mx-1",effect:"dark",closable:"","disable-transitions":!1,onClose:g=>N(t)},{default:l(()=>[C(H(t),1)]),_:2},1032,["onClose"]))),128))]),q.value?(f(),h(_,{key:0,modelValue:x.value,"onUpdate:modelValue":a[2]||(a[2]=t=>x.value=t),class:"ml-1 w-20",placeholder:"请输入副级管理账号",size:"small",onKeyup:J(z,["enter"]),onBlur:z},null,8,["modelValue","onKeyup"])):(f(),h(L,{key:1,class:"button-new-tag ml-1",size:"small",onClick:A},{default:l(()=>[C(" + 新增 ")]),_:1}))]),_:1}),e(b,{gutter:20},{default:l(()=>[e(u,{span:12},{default:l(()=>[e(s,{label:"主人账号",prop:"host"},{default:l(()=>[e(_,{modelValue:o.value.group.host,"onUpdate:modelValue":a[3]||(a[3]=t=>o.value.group.host=t),type:"text",clearable:"",placeholder:"请输入主人账号"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(s,{label:"用户邮箱",prop:"email"},{default:l(()=>[e(_,{modelValue:o.value.group.email,"onUpdate:modelValue":a[4]||(a[4]=t=>o.value.group.email=t),placeholder:"请输入用户邮箱",type:"text",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(k,{shadow:"hover",class:"grid-spacing"},{header:l(()=>[re]),default:l(()=>[e(b,null,{default:l(()=>[e(u,{md:8,sm:8,xs:12},{default:l(()=>[e(s,{label:"私聊开关",prop:"private"},{default:l(()=>[e(c,{modelValue:o.value.sendmsg.private,"onUpdate:modelValue":a[5]||(a[5]=t=>o.value.sendmsg.private=t),"inline-prompt":"",class:"switch","active-text":"已开启","inactive-text":"已关闭"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{md:8,sm:8,xs:12},{default:l(()=>[e(s,{label:"临时对话",prop:"dialogue"},{default:l(()=>[e(c,{modelValue:o.value.sendmsg.dialogue,"onUpdate:modelValue":a[6]||(a[6]=t=>o.value.sendmsg.dialogue=t),"inline-prompt":"",class:"switch","active-text":"已开启","inactive-text":"已关闭"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{md:8,sm:8,xs:12},{default:l(()=>[e(s,{label:"私聊图片",prop:"private_pic"},{default:l(()=>[e(c,{modelValue:o.value.sendmsg.private_pic,"onUpdate:modelValue":a[7]||(a[7]=t=>o.value.sendmsg.private_pic=t),"inline-prompt":"",class:"switch","active-text":"已开启","inactive-text":"已关闭"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(k,{shadow:"hover",class:"grid-spacing"},{header:l(()=>[me]),default:l(()=>[e(b,null,{default:l(()=>[e(u,{md:12,sm:12,xs:24},{default:l(()=>[e(s,{label:"好友请求",prop:"friend_req"},{default:l(()=>[e(d,{modelValue:o.value.other.friend_req,"onUpdate:modelValue":a[8]||(a[8]=t=>o.value.other.friend_req=t),clearable:""},{default:l(()=>[(f(),U(j,null,I(R,(t,g)=>e(p,{key:g,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{md:12,sm:12,xs:24},{default:l(()=>[e(s,{label:"拒绝理由",prop:"friend_ref_msg",style:{color:"#ff4949"}},{default:l(()=>[e(_,{modelValue:o.value.other.friend_ref_msg,"onUpdate:modelValue":a[9]||(a[9]=t=>o.value.other.friend_ref_msg=t),type:"text",placeholder:"请输入拒绝理由",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{label:"发送信息",prop:"friend_msg"},{default:l(()=>[e(_,{modelValue:o.value.other.friend_msg,"onUpdate:modelValue":a[10]||(a[10]=t=>o.value.other.friend_msg=t),type:"text",clearable:""},null,8,["modelValue"])]),_:1}),e(b,null,{default:l(()=>[e(u,{md:12,sm:12,xs:24},{default:l(()=>[e(s,{label:"邀群请求",prop:"invite_req"},{default:l(()=>[e(d,{modelValue:o.value.other.invite_req,"onUpdate:modelValue":a[11]||(a[11]=t=>o.value.other.invite_req=t),clearable:""},{default:l(()=>[(f(),U(j,null,I(R,(t,g)=>e(p,{key:g,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{md:12,sm:12,xs:24},{default:l(()=>[e(s,{label:"拒绝理由",prop:"invite_ref_msg"},{default:l(()=>[e(_,{modelValue:o.value.other.invite_ref_msg,"onUpdate:modelValue":a[12]||(a[12]=t=>o.value.other.invite_ref_msg=t),type:"text",placeholder:"请输入拒绝理由",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{label:"发送信息",prop:"invite_msg"},{default:l(()=>[e(_,{modelValue:o.value.other.invite_msg,"onUpdate:modelValue":a[13]||(a[13]=t=>o.value.other.invite_msg=t),type:"text",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(k,{shadow:"hover",class:"grid-spacing"},{header:l(()=>[pe]),default:l(()=>[e(b,null,{default:l(()=>[e(u,{md:8,sm:8,xs:12},{default:l(()=>[e(s,{label:"我被禁言",prop:"be_ban"},{default:l(()=>[e(c,{modelValue:o.value.dynamic.be_ban,"onUpdate:modelValue":a[14]||(a[14]=t=>o.value.dynamic.be_ban=t),"inline-prompt":"",class:"switch","active-text":"已开启","inactive-text":"已关闭"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{md:8,sm:8,xs:12},{default:l(()=>[e(s,{label:"我被踢出",prop:"be_kicked"},{default:l(()=>[e(c,{modelValue:o.value.dynamic.be_kicked,"onUpdate:modelValue":a[15]||(a[15]=t=>o.value.dynamic.be_kicked=t),"inline-prompt":"",class:"switch","active-text":"已开启","inactive-text":"已关闭"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{md:8,sm:8,xs:12},{default:l(()=>[e(s,{label:"我被升官",prop:"be_promoted"},{default:l(()=>[e(c,{modelValue:o.value.dynamic.be_promoted,"onUpdate:modelValue":a[16]||(a[16]=t=>o.value.dynamic.be_promoted=t),"inline-prompt":"",class:"switch","active-text":"已开启","inactive-text":"已关闭"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{md:8,sm:8,xs:12},{default:l(()=>[e(s,{label:"我被降管",prop:"be_reduce"},{default:l(()=>[e(c,{modelValue:o.value.dynamic.be_reduce,"onUpdate:modelValue":a[17]||(a[17]=t=>o.value.dynamic.be_reduce=t),"inline-prompt":"",class:"switch","active-text":"已开启","inactive-text":"已关闭"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{md:8,sm:8,xs:12},{default:l(()=>[e(s,{label:"收到私信",prop:"accept_msg"},{default:l(()=>[e(c,{modelValue:o.value.dynamic.accept_msg,"onUpdate:modelValue":a[18]||(a[18]=t=>o.value.dynamic.accept_msg=t),"inline-prompt":"",class:"switch","active-text":"已开启","inactive-text":"已关闭"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{md:8,sm:8,xs:12},{default:l(()=>[e(s,{label:"等待添加",prop:"other"},{default:l(()=>[e(c,{modelValue:o.value.dynamic.other,"onUpdate:modelValue":a[19]||(a[19]=t=>o.value.dynamic.other=t),"inline-prompt":"",class:"switch","active-text":"已开启","inactive-text":"已关闭"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),i("div",ce,[e(L,{type:"success",icon:w(F)(w(se)),onClick:K},{default:l(()=>[C("保存全局设置")]),_:1},8,["icon"])])])]),_:1},8,["model","rules"])}}});const xe=Z(fe,[["__scopeId","data-v-9a4b3a64"]]);export{xe as default};
