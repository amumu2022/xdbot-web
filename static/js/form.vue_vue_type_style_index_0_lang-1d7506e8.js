import{R as ReCol}from"./index-17695056.js";import{$ as reactive,d as defineComponent,r as resolveComponent,o as openBlock,c as createElementBlock,i as createBlock,j as withCtx,y as resolveDynamicComponent,f as unref,B as createCommentVNode,h as createTextVNode,z as toDisplayString,k as ref,aP as Oo,e as createVNode,F as Fragment,v as renderList,S as message,aJ as addDialog,ag as h}from"./index-9cea40a6.js";import{u as useRenderIcon}from"./hooks-678b71c4.js";import{R as RunAPI}from"./customApi-845cd991.js";import{_ as _sfc_main$2}from"./formPrimitive.vue_vue_type_script_setup_true_lang-37c6f8fb.js";const formRules=reactive({keyword:[{required:!0,message:"关键词为必填项",trigger:"blur"}],url:[{required:!0,message:"接口地址为必填项",trigger:"blur"},{validator:(a,e,t)=>{e&&e.startsWith("http")?t():t(new Error("路由必须`http`开头"))},trigger:"blur"}],back_set:[{required:!0,message:"返回内容为必填项",trigger:"blur"}],test:[{required:!0,message:"测试语句为必填项",trigger:"blur"}]}),_hoisted_1={class:"flex justify-center items-center"},_sfc_main$1=defineComponent({name:"FromQuestion",__name:"index",props:{label:{required:!0,type:String},description:{required:!1,type:String}},setup(a){const e=a;return(t,o)=>{const n=resolveComponent("el-tooltip");return openBlock(),createElementBlock("div",_hoisted_1,[e.description?(openBlock(),createBlock(n,{key:0,trigger:"hover",content:e.description,placement:"top",effect:"dark"},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(useRenderIcon)("ep:question-filled"))))]),_:1},8,["content"])):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(e.label),1)])}}}),_sfc_main=defineComponent({__name:"form",props:{formInline:{default:()=>({title:"新增",url:"",keyword:"",method:"",value_num:"",rule:"",back_set:"",test:"",encode:"utf-8",headers:"",body:"",cookie:"",enable:"",judge:"",judgeValue:"",judgeKey:"",time:5})}},setup(__props,{expose:__expose}){const props=__props,methodOptions=[{value:"get",label:"get"},{value:"post",label:"post"},{value:"put",label:"put"},{value:"delete",label:"delete"}],encodeOptions=[{value:"utf-8",label:"utf-8"},{value:"gbk",label:"gbk"}],judgeOptions=[{value:"no_judge",label:"不进行判断"},{value:"status_code",label:"状态码"},{value:"keyword",label:"属性值"}],newFormInline=ref(props.formInline),back_msg=ref(""),title=ref(props.formInline.title);title.value==="新增"&&(newFormInline.value.method=methodOptions[0].value,newFormInline.value.encode=encodeOptions[0].value);const ruleFormRef=ref();function calculateTextareaRows(a){if(a){const e=a.split(`
`).length;return Math.max(e,1)}return 1}function getRef(){return ruleFormRef.value}const{clipboardValue,copied}=Oo();function copyStringDC(){clipboardValue.value=unref(back_msg),copied.value?message("复制成功",{type:"success"}):message("复制失败，请检查是否为空",{type:"warning"})}function RunDemo(a){RunAPI(a).then(async e=>{e.code===200?(message("测试成功",{type:"success"}),back_msg.value=e.data):message(`${e.message}`,{type:"error"})})}const formPrimitiveParam=ref(""),resetFormPrimitiveParam=ref(formPrimitiveParam.value);function InputData(){addDialog({width:"30%",title:"导入数据",contentRenderer:()=>h(_sfc_main$2,{data:formPrimitiveParam.value,"onUpdate:data":a=>formPrimitiveParam.value=a}),closeCallBack:()=>{const data=eval("("+formPrimitiveParam.value+")");newFormInline.value.keyword=data.keyword,newFormInline.value.url=data.url,newFormInline.value.method=data.method,newFormInline.value.back_set=decodeURIComponent(atob(data.back_set)),newFormInline.value.rule=decodeURIComponent(atob(data.rule)),newFormInline.value.test=data.test,newFormInline.value.encode=data.encode,newFormInline.value.headers=decodeURIComponent(atob(data.headers)),newFormInline.value.body=decodeURIComponent(atob(data.body)),newFormInline.value.cookie=decodeURIComponent(atob(data.cookie)),newFormInline.value.judgeKey=data.judgeKey,newFormInline.value.judge=data.judge,newFormInline.value.judgeValue=data.judgeValue,newFormInline.value.time=data.time,formPrimitiveParam.value=resetFormPrimitiveParam.value}})}return __expose({getRef}),(a,e)=>{const t=resolveComponent("el-input"),o=resolveComponent("el-form-item"),n=resolveComponent("el-option"),u=resolveComponent("el-select"),d=resolveComponent("el-button"),i=resolveComponent("el-row"),m=resolveComponent("el-form");return openBlock(),createBlock(m,{ref_key:"ruleFormRef",ref:ruleFormRef,model:newFormInline.value,rules:unref(formRules),"label-width":"82px"},{default:withCtx(()=>[createVNode(i,{gutter:40},{default:withCtx(()=>[createVNode(unref(ReCol),{value:12,xs:24,sm:24},{default:withCtx(()=>[createVNode(o,{label:"触发语句",prop:"keyword"},{default:withCtx(()=>[createVNode(t,{modelValue:newFormInline.value.keyword,"onUpdate:modelValue":e[0]||(e[0]=l=>newFormInline.value.keyword=l),clearable:"",placeholder:"请输入触发语句"},null,8,["modelValue"])]),_:1})]),_:1}),createVNode(unref(ReCol),{value:12,xs:24,sm:24},{default:withCtx(()=>[createVNode(o,{label:"测试语句",prop:"test"},{default:withCtx(()=>[createVNode(t,{modelValue:newFormInline.value.test,"onUpdate:modelValue":e[1]||(e[1]=l=>newFormInline.value.test=l),clearable:"",placeholder:"请输入测试语句"},null,8,["modelValue"])]),_:1})]),_:1}),createVNode(unref(ReCol),{value:12,xs:24,sm:24},{default:withCtx(()=>[createVNode(o,{label:"接口地址",prop:"url"},{default:withCtx(()=>[createVNode(t,{modelValue:newFormInline.value.url,"onUpdate:modelValue":e[2]||(e[2]=l=>newFormInline.value.url=l),clearable:"",placeholder:"请输入接口地址"},null,8,["modelValue"])]),_:1})]),_:1}),createVNode(unref(ReCol),{value:12,xs:24,sm:24},{default:withCtx(()=>[createVNode(o,{label:"匹配规则",prop:"rule"},{default:withCtx(()=>[createVNode(t,{modelValue:newFormInline.value.rule,"onUpdate:modelValue":e[3]||(e[3]=l=>newFormInline.value.rule=l),clearable:"",placeholder:"请输入匹配规则"},null,8,["modelValue"])]),_:1})]),_:1}),createVNode(unref(ReCol),{value:12,xs:24,sm:24},{default:withCtx(()=>[createVNode(o,{label:"请求方式",prop:"method"},{default:withCtx(()=>[createVNode(u,{modelValue:newFormInline.value.method,"onUpdate:modelValue":e[4]||(e[4]=l=>newFormInline.value.method=l),placeholder:"请选择请求方式",class:"w-full"},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(methodOptions,(l,r)=>createVNode(n,{key:r,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),createVNode(unref(ReCol),{value:12,xs:24,sm:24},{default:withCtx(()=>[createVNode(o,{label:"编码方式",prop:"encode"},{default:withCtx(()=>[createVNode(u,{modelValue:newFormInline.value.encode,"onUpdate:modelValue":e[5]||(e[5]=l=>newFormInline.value.encode=l),placeholder:"请选择匹配类型",class:"w-full"},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(encodeOptions,(l,r)=>createVNode(n,{key:r,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),createVNode(unref(ReCol),{value:12,xs:24,sm:24},{default:withCtx(()=>[createVNode(o,{label:"请求头",prop:"headers"},{default:withCtx(()=>[createVNode(t,{rows:"2",clearable:"",type:"textarea",modelValue:newFormInline.value.headers,"onUpdate:modelValue":e[6]||(e[6]=l=>newFormInline.value.headers=l),placeholder:"直接复制浏览器数据"},null,8,["modelValue"])]),_:1})]),_:1}),createVNode(unref(ReCol),{value:12,xs:24,sm:24},{default:withCtx(()=>[createVNode(o,{label:"post参数",prop:"body"},{default:withCtx(()=>[createVNode(t,{rows:"2",type:"textarea",modelValue:newFormInline.value.body,"onUpdate:modelValue":e[7]||(e[7]=l=>newFormInline.value.body=l),clearable:"",placeholder:"直接复制浏览器数据即可"},null,8,["modelValue"])]),_:1})]),_:1}),createVNode(unref(ReCol),{value:24,xs:24,sm:24},{default:withCtx(()=>[createVNode(o,{label:"Cookie",prop:"cookie"},{default:withCtx(()=>[createVNode(t,{rows:calculateTextareaRows(newFormInline.value.cookie),type:"textarea",modelValue:newFormInline.value.cookie,"onUpdate:modelValue":e[8]||(e[8]=l=>newFormInline.value.cookie=l),clearable:"",placeholder:"仅对需要Cookie的进行支持"},null,8,["rows","modelValue"])]),_:1})]),_:1}),createVNode(unref(ReCol),{value:12,xs:24,sm:24},{default:withCtx(()=>[createVNode(o,{label:"超时时间",prop:"time"},{label:withCtx(()=>[createVNode(_sfc_main$1,{label:"超时时间",description:"请求超时时间，超出该时间返回请求超时并返回给用户"})]),default:withCtx(()=>[createVNode(t,{modelValue:newFormInline.value.time,"onUpdate:modelValue":e[9]||(e[9]=l=>newFormInline.value.time=l),clearable:"",placeholder:"请输入请求超时时间"},null,8,["modelValue"])]),_:1})]),_:1}),createVNode(unref(ReCol),{value:12,xs:24,sm:24},{default:withCtx(()=>[createVNode(o,{label:"请求判断",prop:"judge"},{label:withCtx(()=>[createVNode(_sfc_main$1,{label:"请求判断",description:"作为判断请求是否成功的依据"})]),default:withCtx(()=>[createVNode(u,{modelValue:newFormInline.value.judge,"onUpdate:modelValue":e[10]||(e[10]=l=>newFormInline.value.judge=l),placeholder:"请选择判断类型",class:"w-full"},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(judgeOptions,(l,r)=>createVNode(n,{key:r,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),createVNode(unref(ReCol),{value:12,xs:24,sm:24},{default:withCtx(()=>[newFormInline.value.judge=="keyword"?(openBlock(),createBlock(o,{key:0,label:"判断属性",prop:"judgeKey"},{label:withCtx(()=>[createVNode(_sfc_main$1,{label:"判断属性",description:"请求判断的键值"})]),default:withCtx(()=>[createVNode(t,{modelValue:newFormInline.value.judgeKey,"onUpdate:modelValue":e[11]||(e[11]=l=>newFormInline.value.judgeKey=l),clearable:"",placeholder:"请输入属性键值"},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0)]),_:1}),createVNode(unref(ReCol),{value:12,xs:24,sm:24},{default:withCtx(()=>[newFormInline.value.judge!="no_judge"?(openBlock(),createBlock(o,{key:0,label:"判断值",prop:"judgeValue"},{label:withCtx(()=>[createVNode(_sfc_main$1,{label:"判断值",description:"仅支持判断请求状态码及json返回内容"})]),default:withCtx(()=>[createVNode(t,{modelValue:newFormInline.value.judgeValue,"onUpdate:modelValue":e[12]||(e[12]=l=>newFormInline.value.judgeValue=l),clearable:"",placeholder:"请输入判断值"},null,8,["modelValue"])]),_:1})):createCommentVNode("",!0)]),_:1}),createVNode(unref(ReCol),{value:24,xs:24,sm:24},{default:withCtx(()=>[createVNode(o,{label:"返回内容",prop:"back_set"},{default:withCtx(()=>[createVNode(t,{rows:"4",type:"textarea",modelValue:newFormInline.value.back_set,"onUpdate:modelValue":e[13]||(e[13]=l=>newFormInline.value.back_set=l),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),createVNode(unref(ReCol),{value:24,xs:24,sm:24},{default:withCtx(()=>[createVNode(o,{label:"内容展示"},{label:withCtx(()=>[createVNode(_sfc_main$1,{label:"内容展示",description:"测试后将会在这里展示内容"})]),default:withCtx(()=>[createVNode(t,{rows:"4",type:"textarea",value:back_msg.value,"onUpdate:value":e[14]||(e[14]=l=>back_msg.value=l),clearable:"",placeholder:""},null,8,["value"])]),_:1})]),_:1}),createVNode(unref(ReCol),{value:12,xs:24,sm:24,style:{"margin-left":"40px"}},{default:withCtx(()=>[createVNode(d,{type:"primary",class:"button-margin",onClick:e[15]||(e[15]=l=>RunDemo(props.formInline))},{default:withCtx(()=>[createTextVNode(" 测试一下 ")]),_:1}),createVNode(d,{class:"button-margin",type:"danger",onClick:e[16]||(e[16]=l=>InputData())},{default:withCtx(()=>[createTextVNode("导入数据")]),_:1}),createVNode(d,{type:"success",class:"button-margin",onClick:e[17]||(e[17]=l=>copyStringDC())},{default:withCtx(()=>[createTextVNode("复制内容")]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),form_vue_vue_type_style_index_0_lang="";export{_sfc_main as _};
